<!DOCTYPE html>

<html>
<head>
  <title>moment.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="app.html">
                app.js
              </a>
            
              
              <a class="source" href="about.controller.html">
                about.controller.js
              </a>
            
              
              <a class="source" href="about.html.html">
                about.html.js
              </a>
            
              
              <a class="source" href="about.html">
                about.js
              </a>
            
              
              <a class="source" href="about.html">
                about.js
              </a>
            
              
              <a class="source" href="about.html">
                about.js
              </a>
            
              
              <a class="source" href="addressBook.edit.controller.html">
                addressBook.edit.controller.js
              </a>
            
              
              <a class="source" href="addressBook.edit.html.html">
                addressBook.edit.html.js
              </a>
            
              
              <a class="source" href="addressBook.edit.html">
                addressBook.edit.js
              </a>
            
              
              <a class="source" href="addressBook.edit.html">
                addressBook.edit.js
              </a>
            
              
              <a class="source" href="addressBook.edit.html">
                addressBook.edit.js
              </a>
            
              
              <a class="source" href="addressBook.list.controller.html">
                addressBook.list.controller.js
              </a>
            
              
              <a class="source" href="addressBook.list.html.html">
                addressBook.list.html.js
              </a>
            
              
              <a class="source" href="addressBook.list.html">
                addressBook.list.js
              </a>
            
              
              <a class="source" href="addressBook.list.html">
                addressBook.list.js
              </a>
            
              
              <a class="source" href="addressBook.list.html">
                addressBook.list.js
              </a>
            
              
              <a class="source" href="all.html">
                all.js
              </a>
            
              
              <a class="source" href="browser.banner.html">
                browser.banner.js
              </a>
            
              
              <a class="source" href="home.controller.html">
                home.controller.js
              </a>
            
              
              <a class="source" href="home.html.html">
                home.html.js
              </a>
            
              
              <a class="source" href="home.html">
                home.js
              </a>
            
              
              <a class="source" href="home.html">
                home.js
              </a>
            
              
              <a class="source" href="home.html">
                home.js
              </a>
            
              
              <a class="source" href="i18n.html">
                i18n.js
              </a>
            
              
              <a class="source" href="jade.html">
                jade.js
              </a>
            
              
              <a class="source" href="jquery.bbq.html">
                jquery.bbq.js
              </a>
            
              
              <a class="source" href="jquery.migrate.html">
                jquery.migrate.js
              </a>
            
              
              <a class="source" href="json2.html">
                json2.js
              </a>
            
              
              <a class="source" href="language.html">
                language.js
              </a>
            
              
              <a class="source" href="layout.default.controller.html">
                layout.default.controller.js
              </a>
            
              
              <a class="source" href="layout.default.html.html">
                layout.default.html.js
              </a>
            
              
              <a class="source" href="layout.default.html">
                layout.default.js
              </a>
            
              
              <a class="source" href="layout.footer.controller.html">
                layout.footer.controller.js
              </a>
            
              
              <a class="source" href="layout.footer.html.html">
                layout.footer.html.js
              </a>
            
              
              <a class="source" href="layout.footer.html">
                layout.footer.js
              </a>
            
              
              <a class="source" href="layout.header.controller.html">
                layout.header.controller.js
              </a>
            
              
              <a class="source" href="layout.header.html.html">
                layout.header.html.js
              </a>
            
              
              <a class="source" href="layout.header.html">
                layout.header.js
              </a>
            
              
              <a class="source" href="layout.header.html">
                layout.header.js
              </a>
            
              
              <a class="source" href="layout.header.html">
                layout.header.js
              </a>
            
              
              <a class="source" href="layout.simple.controller.html">
                layout.simple.controller.js
              </a>
            
              
              <a class="source" href="layout.simple.html.html">
                layout.simple.html.js
              </a>
            
              
              <a class="source" href="layout.simple.html">
                layout.simple.js
              </a>
            
              
              <a class="source" href="log.html">
                log.js
              </a>
            
              
              <a class="source" href="moment.html">
                moment.js
              </a>
            
              
              <a class="source" href="multitracker.html">
                multitracker.js
              </a>
            
              
              <a class="source" href="myServices.controller.html">
                myServices.controller.js
              </a>
            
              
              <a class="source" href="myServices.html.html">
                myServices.html.js
              </a>
            
              
              <a class="source" href="myServices.html">
                myServices.js
              </a>
            
              
              <a class="source" href="myServices.html">
                myServices.js
              </a>
            
              
              <a class="source" href="moment.lang.html">
                moment.lang.js
              </a>
            
              
              <a class="source" href="moment.lang.html">
                moment.lang.js
              </a>
            
              
              <a class="source" href="require.config.html">
                require.config.js
              </a>
            
              
              <a class="source" href="require.html">
                require.js
              </a>
            
              
              <a class="source" href="service.list.html">
                service.list.js
              </a>
            
              
              <a class="source" href="service.list.controller.html">
                service.list.controller.js
              </a>
            
              
              <a class="source" href="service.list.html.html">
                service.list.html.js
              </a>
            
              
              <a class="source" href="service.thumb.html">
                service.thumb.js
              </a>
            
              
              <a class="source" href="service.thumb.controller.html">
                service.thumb.controller.js
              </a>
            
              
              <a class="source" href="service.thumb.html.html">
                service.thumb.html.js
              </a>
            
              
              <a class="source" href="serviceCatalog.html">
                serviceCatalog.js
              </a>
            
              
              <a class="source" href="serviceCatalog.html">
                serviceCatalog.js
              </a>
            
              
              <a class="source" href="serviceCatalog.html">
                serviceCatalog.js
              </a>
            
              
              <a class="source" href="serviceCatalog.controller.html">
                serviceCatalog.controller.js
              </a>
            
              
              <a class="source" href="serviceCatalog.html.html">
                serviceCatalog.html.js
              </a>
            
              
              <a class="source" href="serviceDetail.html">
                serviceDetail.js
              </a>
            
              
              <a class="source" href="serviceDetail.html">
                serviceDetail.js
              </a>
            
              
              <a class="source" href="serviceDetail.html">
                serviceDetail.js
              </a>
            
              
              <a class="source" href="serviceDetail.controller.html">
                serviceDetail.controller.js
              </a>
            
              
              <a class="source" href="serviceDetail.html.html">
                serviceDetail.html.js
              </a>
            
              
              <a class="source" href="servicePlan.html">
                servicePlan.js
              </a>
            
              
              <a class="source" href="servicePlan.html">
                servicePlan.js
              </a>
            
              
              <a class="source" href="servicePlan.html">
                servicePlan.js
              </a>
            
              
              <a class="source" href="servicePlan.controller.html">
                servicePlan.controller.js
              </a>
            
              
              <a class="source" href="servicePlan.html.html">
                servicePlan.html.js
              </a>
            
              
              <a class="source" href="settings.html">
                settings.js
              </a>
            
              
              <a class="source" href="sideBar.html">
                sideBar.js
              </a>
            
              
              <a class="source" href="sideBar.html">
                sideBar.js
              </a>
            
              
              <a class="source" href="sideBar.html">
                sideBar.js
              </a>
            
              
              <a class="source" href="sideBar.controller.html">
                sideBar.controller.js
              </a>
            
              
              <a class="source" href="sideBar.html.html">
                sideBar.html.js
              </a>
            
              
              <a class="source" href="tmpst.html">
                tmpst.js
              </a>
            
              
              <a class="source" href="useragent.html">
                useragent.js
              </a>
            
              
              <a class="source" href="all.html">
                all.js
              </a>
            
              
              <a class="source" href="dash.html">
                dash.js
              </a>
            
              
              <a class="source" href="serviceModal.html">
                serviceModal.js
              </a>
            
              
              <a class="source" href="about.html">
                about.js
              </a>
            
              
              <a class="source" href="addressBook.html">
                addressBook.js
              </a>
            
              
              <a class="source" href="all.html">
                all.js
              </a>
            
              
              <a class="source" href="home.html">
                home.js
              </a>
            
              
              <a class="source" href="my.services.html">
                my.services.js
              </a>
            
              
              <a class="source" href="serviceDetail.html">
                serviceDetail.js
              </a>
            
              
              <a class="source" href="services.html">
                services.js
              </a>
            
              
              <a class="source" href="all.html">
                all.js
              </a>
            
              
              <a class="source" href="onLastRepeat.html">
                onLastRepeat.js
              </a>
            
              
              <a class="source" href="vm.component.html">
                vm.component.js
              </a>
            
              
              <a class="source" href="vm.errorPanel.html">
                vm.errorPanel.js
              </a>
            
              
              <a class="source" href="vm.parser.html">
                vm.parser.js
              </a>
            
              
              <a class="source" href="addressBookModel.html">
                addressBookModel.js
              </a>
            
              
              <a class="source" href="all.html">
                all.js
              </a>
            
              
              <a class="source" href="errorHttpInterceptor.html">
                errorHttpInterceptor.js
              </a>
            
              
              <a class="source" href="errorService.html">
                errorService.js
              </a>
            
              
              <a class="source" href="filterService.html">
                filterService.js
              </a>
            
              
              <a class="source" href="jsonHttpInterceptor.html">
                jsonHttpInterceptor.js
              </a>
            
              
              <a class="source" href="serviceModel.html">
                serviceModel.js
              </a>
            
              
              <a class="source" href="servicePlanModel.html">
                servicePlanModel.js
              </a>
            
              
              <a class="source" href="sideBarModel.html">
                sideBarModel.js
              </a>
            
              
              <a class="source" href="all.html">
                all.js
              </a>
            
              
              <a class="source" href="dash.html">
                dash.js
              </a>
            
              
              <a class="source" href="all.html">
                all.js
              </a>
            
              
              <a class="source" href="errorPanel.html.html">
                errorPanel.html.js
              </a>
            
              
              <a class="source" href="errorPanel.html">
                errorPanel.js
              </a>
            
              
              <a class="source" href="errorPanel.html">
                errorPanel.js
              </a>
            
              
              <a class="source" href="service.modal.html">
                service.modal.js
              </a>
            
              
              <a class="source" href="service.modal.html.html">
                service.modal.html.js
              </a>
            
              
              <a class="source" href="service.modal.html">
                service.modal.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>moment.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <p>! moment.js
! version : 2.6.0
! authors : Tim Wood, Iskren Chernev, Moment.js contributors
! license : MIT
! momentjs.com</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">undefined</span>) </span>{

    <span class="hljs-comment">/************************************
        Constants
    ************************************/</span>

    <span class="hljs-keyword">var</span> moment,
        VERSION = <span class="hljs-string">"2.6.0"</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>the global-scope this is NOT the global object in Node.js</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        globalScope = <span class="hljs-keyword">typeof</span> global !== <span class="hljs-string">'undefined'</span> ? global : <span class="hljs-keyword">this</span>,
        oldGlobalMoment,
        round = <span class="hljs-built_in">Math</span>.round,
        i,

        YEAR = <span class="hljs-number">0</span>,
        MONTH = <span class="hljs-number">1</span>,
        DATE = <span class="hljs-number">2</span>,
        HOUR = <span class="hljs-number">3</span>,
        MINUTE = <span class="hljs-number">4</span>,
        SECOND = <span class="hljs-number">5</span>,
        MILLISECOND = <span class="hljs-number">6</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>internal storage for language config files</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        languages = {},</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>moment internal properties</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        momentProperties = {
            _isAMomentObject: <span class="hljs-literal">null</span>,
            _i: <span class="hljs-literal">null</span>,
            _f: <span class="hljs-literal">null</span>,
            _l: <span class="hljs-literal">null</span>,
            _strict: <span class="hljs-literal">null</span>,
            _isUTC: <span class="hljs-literal">null</span>,
            _offset: <span class="hljs-literal">null</span>, <span class="hljs-comment">// optional. Combine with _isUTC</span>
            _pf: <span class="hljs-literal">null</span>,
            _lang: <span class="hljs-literal">null</span> <span class="hljs-comment">// optional</span>
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>check for nodeJS</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        hasModule = (<span class="hljs-keyword">typeof</span> <span class="hljs-built_in">module</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-built_in">module</span>.exports),</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>ASP.NET json date format regex</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        aspNetJsonRegex = <span class="hljs-regexp">/^\/?Date\((\-?\d+)/i</span>,
        aspNetTimeSpanJsonRegex = <span class="hljs-regexp">/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>from <a href="http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html">http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html</a>
somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        isoDurationRegex = <span class="hljs-regexp">/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>format tokens</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        formattingTokens = <span class="hljs-regexp">/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g</span>,
        localFormattingTokens = <span class="hljs-regexp">/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>parsing token regexes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        parseTokenOneOrTwoDigits = <span class="hljs-regexp">/\d\d?/</span>, <span class="hljs-comment">// 0 - 99</span>
        parseTokenOneToThreeDigits = <span class="hljs-regexp">/\d{1,3}/</span>, <span class="hljs-comment">// 0 - 999</span>
        parseTokenOneToFourDigits = <span class="hljs-regexp">/\d{1,4}/</span>, <span class="hljs-comment">// 0 - 9999</span>
        parseTokenOneToSixDigits = <span class="hljs-regexp">/[+\-]?\d{1,6}/</span>, <span class="hljs-comment">// -999,999 - 999,999</span>
        parseTokenDigits = <span class="hljs-regexp">/\d+/</span>, <span class="hljs-comment">// nonzero number of digits</span>
        parseTokenWord = <span class="hljs-regexp">/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i</span>, <span class="hljs-comment">// any word (or two) characters or numbers including two/three word month in arabic.</span>
        parseTokenTimezone = <span class="hljs-regexp">/Z|[\+\-]\d\d:?\d\d/gi</span>, <span class="hljs-comment">// +00:00 -00:00 +0000 -0000 or Z</span>
        parseTokenT = <span class="hljs-regexp">/T/i</span>, <span class="hljs-comment">// T (ISO separator)</span>
        parseTokenTimestampMs = <span class="hljs-regexp">/[\+\-]?\d+(\.\d{1,3})?/</span>, <span class="hljs-comment">// 123456789 123456789.123</span>
        parseTokenOrdinal = <span class="hljs-regexp">/\d{1,2}/</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>strict parsing regexes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        parseTokenOneDigit = <span class="hljs-regexp">/\d/</span>, <span class="hljs-comment">// 0 - 9</span>
        parseTokenTwoDigits = <span class="hljs-regexp">/\d\d/</span>, <span class="hljs-comment">// 00 - 99</span>
        parseTokenThreeDigits = <span class="hljs-regexp">/\d{3}/</span>, <span class="hljs-comment">// 000 - 999</span>
        parseTokenFourDigits = <span class="hljs-regexp">/\d{4}/</span>, <span class="hljs-comment">// 0000 - 9999</span>
        parseTokenSixDigits = <span class="hljs-regexp">/[+-]?\d{6}/</span>, <span class="hljs-comment">// -999,999 - 999,999</span>
        parseTokenSignedNumber = <span class="hljs-regexp">/[+-]?\d+/</span>, <span class="hljs-comment">// -inf - inf</span></pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>iso 8601 regex
0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        isoRegex = <span class="hljs-regexp">/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/</span>,

        isoFormat = <span class="hljs-string">'YYYY-MM-DDTHH:mm:ssZ'</span>,

        isoDates = [
            [<span class="hljs-string">'YYYYYY-MM-DD'</span>, <span class="hljs-regexp">/[+-]\d{6}-\d{2}-\d{2}/</span>],
            [<span class="hljs-string">'YYYY-MM-DD'</span>, <span class="hljs-regexp">/\d{4}-\d{2}-\d{2}/</span>],
            [<span class="hljs-string">'GGGG-[W]WW-E'</span>, <span class="hljs-regexp">/\d{4}-W\d{2}-\d/</span>],
            [<span class="hljs-string">'GGGG-[W]WW'</span>, <span class="hljs-regexp">/\d{4}-W\d{2}/</span>],
            [<span class="hljs-string">'YYYY-DDD'</span>, <span class="hljs-regexp">/\d{4}-\d{3}/</span>]
        ],</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>iso time formats and regexes</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        isoTimes = [
            [<span class="hljs-string">'HH:mm:ss.SSSS'</span>, <span class="hljs-regexp">/(T| )\d\d:\d\d:\d\d\.\d+/</span>],
            [<span class="hljs-string">'HH:mm:ss'</span>, <span class="hljs-regexp">/(T| )\d\d:\d\d:\d\d/</span>],
            [<span class="hljs-string">'HH:mm'</span>, <span class="hljs-regexp">/(T| )\d\d:\d\d/</span>],
            [<span class="hljs-string">'HH'</span>, <span class="hljs-regexp">/(T| )\d\d/</span>]
        ],</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>timezone chunker “+10:00” &gt; [“10”, “00”] or “-1530” &gt; [“-15”, “30”]</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        parseTimezoneChunker = <span class="hljs-regexp">/([\+\-]|\d\d)/gi</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>getter and setter names</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        proxyGettersAndSetters = <span class="hljs-string">'Date|Hours|Minutes|Seconds|Milliseconds'</span>.split(<span class="hljs-string">'|'</span>),
        unitMillisecondFactors = {
            <span class="hljs-string">'Milliseconds'</span>: <span class="hljs-number">1</span>,
            <span class="hljs-string">'Seconds'</span>: <span class="hljs-number">1e3</span>,
            <span class="hljs-string">'Minutes'</span>: <span class="hljs-number">6e4</span>,
            <span class="hljs-string">'Hours'</span>: <span class="hljs-number">36e5</span>,
            <span class="hljs-string">'Days'</span>: <span class="hljs-number">864e5</span>,
            <span class="hljs-string">'Months'</span>: <span class="hljs-number">2592e6</span>,
            <span class="hljs-string">'Years'</span>: <span class="hljs-number">31536e6</span>
        },

        unitAliases = {
            ms: <span class="hljs-string">'millisecond'</span>,
            s: <span class="hljs-string">'second'</span>,
            m: <span class="hljs-string">'minute'</span>,
            h: <span class="hljs-string">'hour'</span>,
            d: <span class="hljs-string">'day'</span>,
            D: <span class="hljs-string">'date'</span>,
            w: <span class="hljs-string">'week'</span>,
            W: <span class="hljs-string">'isoWeek'</span>,
            M: <span class="hljs-string">'month'</span>,
            Q: <span class="hljs-string">'quarter'</span>,
            y: <span class="hljs-string">'year'</span>,
            DDD: <span class="hljs-string">'dayOfYear'</span>,
            e: <span class="hljs-string">'weekday'</span>,
            E: <span class="hljs-string">'isoWeekday'</span>,
            gg: <span class="hljs-string">'weekYear'</span>,
            GG: <span class="hljs-string">'isoWeekYear'</span>
        },

        camelFunctions = {
            dayofyear: <span class="hljs-string">'dayOfYear'</span>,
            isoweekday: <span class="hljs-string">'isoWeekday'</span>,
            isoweek: <span class="hljs-string">'isoWeek'</span>,
            weekyear: <span class="hljs-string">'weekYear'</span>,
            isoweekyear: <span class="hljs-string">'isoWeekYear'</span>
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>format function strings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        formatFunctions = {},</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>tokens to ordinalize and pad</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        ordinalizeTokens = <span class="hljs-string">'DDD w W M D d'</span>.split(<span class="hljs-string">' '</span>),
        paddedTokens = <span class="hljs-string">'M D H h m s w W'</span>.split(<span class="hljs-string">' '</span>),

        formatTokenFunctions = {
            M: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.month() + <span class="hljs-number">1</span>;
            },
            MMM: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">format</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.lang().monthsShort(<span class="hljs-keyword">this</span>, format);
            },
            MMMM: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">format</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.lang().months(<span class="hljs-keyword">this</span>, format);
            },
            D: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.date();
            },
            DDD: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.dayOfYear();
            },
            d: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.day();
            },
            dd: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">format</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.lang().weekdaysMin(<span class="hljs-keyword">this</span>, format);
            },
            ddd: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">format</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.lang().weekdaysShort(<span class="hljs-keyword">this</span>, format);
            },
            dddd: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">format</span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.lang().weekdays(<span class="hljs-keyword">this</span>, format);
            },
            w: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.week();
            },
            W: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.isoWeek();
            },
            YY: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.year() % <span class="hljs-number">100</span>, <span class="hljs-number">2</span>);
            },
            YYYY: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.year(), <span class="hljs-number">4</span>);
            },
            YYYYY: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.year(), <span class="hljs-number">5</span>);
            },
            YYYYYY: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> y = <span class="hljs-keyword">this</span>.year(),
                    sign = y &gt;= <span class="hljs-number">0</span> ? <span class="hljs-string">'+'</span> : <span class="hljs-string">'-'</span>;
                <span class="hljs-keyword">return</span> sign + leftZeroFill(<span class="hljs-built_in">Math</span>.abs(y), <span class="hljs-number">6</span>);
            },
            gg: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.weekYear() % <span class="hljs-number">100</span>, <span class="hljs-number">2</span>);
            },
            gggg: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.weekYear(), <span class="hljs-number">4</span>);
            },
            ggggg: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.weekYear(), <span class="hljs-number">5</span>);
            },
            GG: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.isoWeekYear() % <span class="hljs-number">100</span>, <span class="hljs-number">2</span>);
            },
            GGGG: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.isoWeekYear(), <span class="hljs-number">4</span>);
            },
            GGGGG: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.isoWeekYear(), <span class="hljs-number">5</span>);
            },
            e: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.weekday();
            },
            E: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.isoWeekday();
            },
            a: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.lang().meridiem(<span class="hljs-keyword">this</span>.hours(), <span class="hljs-keyword">this</span>.minutes(), <span class="hljs-literal">true</span>);
            },
            A: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.lang().meridiem(<span class="hljs-keyword">this</span>.hours(), <span class="hljs-keyword">this</span>.minutes(), <span class="hljs-literal">false</span>);
            },
            H: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hours();
            },
            h: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.hours() % <span class="hljs-number">12</span> || <span class="hljs-number">12</span>;
            },
            m: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.minutes();
            },
            s: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.seconds();
            },
            S: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> toInt(<span class="hljs-keyword">this</span>.milliseconds() / <span class="hljs-number">100</span>);
            },
            SS: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(toInt(<span class="hljs-keyword">this</span>.milliseconds() / <span class="hljs-number">10</span>), <span class="hljs-number">2</span>);
            },
            SSS: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.milliseconds(), <span class="hljs-number">3</span>);
            },
            SSSS: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> leftZeroFill(<span class="hljs-keyword">this</span>.milliseconds(), <span class="hljs-number">3</span>);
            },
            Z: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> a = -<span class="hljs-keyword">this</span>.zone(),
                    b = <span class="hljs-string">"+"</span>;
                <span class="hljs-keyword">if</span> (a &lt; <span class="hljs-number">0</span>) {
                    a = -a;
                    b = <span class="hljs-string">"-"</span>;
                }
                <span class="hljs-keyword">return</span> b + leftZeroFill(toInt(a / <span class="hljs-number">60</span>), <span class="hljs-number">2</span>) + <span class="hljs-string">":"</span> + leftZeroFill(toInt(a) % <span class="hljs-number">60</span>, <span class="hljs-number">2</span>);
            },
            ZZ: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">var</span> a = -<span class="hljs-keyword">this</span>.zone(),
                    b = <span class="hljs-string">"+"</span>;
                <span class="hljs-keyword">if</span> (a &lt; <span class="hljs-number">0</span>) {
                    a = -a;
                    b = <span class="hljs-string">"-"</span>;
                }
                <span class="hljs-keyword">return</span> b + leftZeroFill(toInt(a / <span class="hljs-number">60</span>), <span class="hljs-number">2</span>) + leftZeroFill(toInt(a) % <span class="hljs-number">60</span>, <span class="hljs-number">2</span>);
            },
            z: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.zoneAbbr();
            },
            zz: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.zoneName();
            },
            X: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.unix();
            },
            Q: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.quarter();
            }
        },

        lists = [<span class="hljs-string">'months'</span>, <span class="hljs-string">'monthsShort'</span>, <span class="hljs-string">'weekdays'</span>, <span class="hljs-string">'weekdaysShort'</span>, <span class="hljs-string">'weekdaysMin'</span>];

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">defaultParsingFlags</span>(<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>We need to deep clone this object, and es5 standard is not very
helpful.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">return</span> {
            empty: <span class="hljs-literal">false</span>,
            unusedTokens: [],
            unusedInput: [],
            overflow: -<span class="hljs-number">2</span>,
            charsLeftOver: <span class="hljs-number">0</span>,
            nullInput: <span class="hljs-literal">false</span>,
            invalidMonth: <span class="hljs-literal">null</span>,
            invalidFormat: <span class="hljs-literal">false</span>,
            userInvalidated: <span class="hljs-literal">false</span>,
            iso: <span class="hljs-literal">false</span>
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deprecate</span>(<span class="hljs-params">msg, fn</span>) </span>{
        <span class="hljs-keyword">var</span> firstTime = <span class="hljs-literal">true</span>;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printMsg</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">if</span> (moment.suppressDeprecationWarnings === <span class="hljs-literal">false</span> &amp;&amp;
                <span class="hljs-keyword">typeof</span> <span class="hljs-built_in">console</span> !== <span class="hljs-string">'undefined'</span> &amp;&amp; <span class="hljs-built_in">console</span>.warn) {
                <span class="hljs-built_in">console</span>.warn(<span class="hljs-string">"Deprecation warning: "</span> + msg);
            }
        }
        <span class="hljs-keyword">return</span> extend(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">if</span> (firstTime) {
                printMsg();
                firstTime = <span class="hljs-literal">false</span>;
            }
            <span class="hljs-keyword">return</span> fn.apply(<span class="hljs-keyword">this</span>, <span class="hljs-built_in">arguments</span>);
        }, fn);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">padToken</span>(<span class="hljs-params">func, count</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a</span>) </span>{
            <span class="hljs-keyword">return</span> leftZeroFill(func.call(<span class="hljs-keyword">this</span>, a), count);
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ordinalizeToken</span>(<span class="hljs-params">func, period</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">a</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.lang().ordinal(func.call(<span class="hljs-keyword">this</span>, a), period);
        };
    }

    <span class="hljs-keyword">while</span> (ordinalizeTokens.length) {
        i = ordinalizeTokens.pop();
        formatTokenFunctions[i + <span class="hljs-string">'o'</span>] = ordinalizeToken(formatTokenFunctions[i], i);
    }
    <span class="hljs-keyword">while</span> (paddedTokens.length) {
        i = paddedTokens.pop();
        formatTokenFunctions[i + i] = padToken(formatTokenFunctions[i], <span class="hljs-number">2</span>);
    }
    formatTokenFunctions.DDDD = padToken(formatTokenFunctions.DDD, <span class="hljs-number">3</span>);


    <span class="hljs-comment">/************************************
        Constructors
    ************************************/</span>

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Language</span>(<span class="hljs-params"></span>) </span>{

    }</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>Moment prototype object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Moment</span>(<span class="hljs-params">config</span>) </span>{
        checkOverflow(config);
        extend(<span class="hljs-keyword">this</span>, config);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-19">&#182;</a>
              </div>
              <p>Duration Constructor</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Duration</span>(<span class="hljs-params">duration</span>) </span>{
        <span class="hljs-keyword">var</span> normalizedInput = normalizeObjectUnits(duration),
            years = normalizedInput.year || <span class="hljs-number">0</span>,
            quarters = normalizedInput.quarter || <span class="hljs-number">0</span>,
            months = normalizedInput.month || <span class="hljs-number">0</span>,
            weeks = normalizedInput.week || <span class="hljs-number">0</span>,
            days = normalizedInput.day || <span class="hljs-number">0</span>,
            hours = normalizedInput.hour || <span class="hljs-number">0</span>,
            minutes = normalizedInput.minute || <span class="hljs-number">0</span>,
            seconds = normalizedInput.second || <span class="hljs-number">0</span>,
            milliseconds = normalizedInput.millisecond || <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-20">&#182;</a>
              </div>
              <p>representation for dateAddRemove</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">this</span>._milliseconds = +milliseconds +
            seconds * <span class="hljs-number">1e3</span> + <span class="hljs-comment">// 1000</span>
        minutes * <span class="hljs-number">6e4</span> + <span class="hljs-comment">// 1000 * 60</span>
        hours * <span class="hljs-number">36e5</span>; <span class="hljs-comment">// 1000 * 60 * 60</span></pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-21">&#182;</a>
              </div>
              <p>Because of dateAddRemove treats 24 hours as different from a
day when working around DST, we need to store them separately</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">this</span>._days = +days +
            weeks * <span class="hljs-number">7</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-22">&#182;</a>
              </div>
              <p>It is impossible translate months into days without knowing
which months you are are talking about, so we have to store
it separately.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">this</span>._months = +months +
            quarters * <span class="hljs-number">3</span> +
            years * <span class="hljs-number">12</span>;

        <span class="hljs-keyword">this</span>._data = {};

        <span class="hljs-keyword">this</span>._bubble();
    }

    <span class="hljs-comment">/************************************
        Helpers
    ************************************/</span>


    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">extend</span>(<span class="hljs-params">a, b</span>) </span>{
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i <span class="hljs-keyword">in</span> b) {
            <span class="hljs-keyword">if</span> (b.hasOwnProperty(i)) {
                a[i] = b[i];
            }
        }

        <span class="hljs-keyword">if</span> (b.hasOwnProperty(<span class="hljs-string">"toString"</span>)) {
            a.toString = b.toString;
        }

        <span class="hljs-keyword">if</span> (b.hasOwnProperty(<span class="hljs-string">"valueOf"</span>)) {
            a.valueOf = b.valueOf;
        }

        <span class="hljs-keyword">return</span> a;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">cloneMoment</span>(<span class="hljs-params">m</span>) </span>{
        <span class="hljs-keyword">var</span> result = {}, i;
        <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> m) {
            <span class="hljs-keyword">if</span> (m.hasOwnProperty(i) &amp;&amp; momentProperties.hasOwnProperty(i)) {
                result[i] = m[i];
            }
        }

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">absRound</span>(<span class="hljs-params">number</span>) </span>{
        <span class="hljs-keyword">if</span> (number &lt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.ceil(number);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(number);
        }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-23">&#182;</a>
              </div>
              <p>left zero fill a number
see <a href="http://jsperf.com/left-zero-filling">http://jsperf.com/left-zero-filling</a> for performance comparison</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">leftZeroFill</span>(<span class="hljs-params">number, targetLength, forceSign</span>) </span>{
        <span class="hljs-keyword">var</span> output = <span class="hljs-string">''</span> + <span class="hljs-built_in">Math</span>.abs(number),
            sign = number &gt;= <span class="hljs-number">0</span>;

        <span class="hljs-keyword">while</span> (output.length &lt; targetLength) {
            output = <span class="hljs-string">'0'</span> + output;
        }
        <span class="hljs-keyword">return</span> (sign ? (forceSign ? <span class="hljs-string">'+'</span> : <span class="hljs-string">''</span>) : <span class="hljs-string">'-'</span>) + output;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-24">&#182;</a>
              </div>
              <p>helper function for <em>.addTime and </em>.subtractTime</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addOrSubtractDurationFromMoment</span>(<span class="hljs-params">mom, duration, isAdding, updateOffset</span>) </span>{
        <span class="hljs-keyword">var</span> milliseconds = duration._milliseconds,
            days = duration._days,
            months = duration._months;
        updateOffset = updateOffset == <span class="hljs-literal">null</span> ? <span class="hljs-literal">true</span> : updateOffset;

        <span class="hljs-keyword">if</span> (milliseconds) {
            mom._d.setTime(+mom._d + milliseconds * isAdding);
        }
        <span class="hljs-keyword">if</span> (days) {
            rawSetter(mom, <span class="hljs-string">'Date'</span>, rawGetter(mom, <span class="hljs-string">'Date'</span>) + days * isAdding);
        }
        <span class="hljs-keyword">if</span> (months) {
            rawMonthSetter(mom, rawGetter(mom, <span class="hljs-string">'Month'</span>) + months * isAdding);
        }
        <span class="hljs-keyword">if</span> (updateOffset) {
            moment.updateOffset(mom, days || months);
        }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-25">&#182;</a>
              </div>
              <p>check if is an array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isArray</span>(<span class="hljs-params">input</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.toString.call(input) === <span class="hljs-string">'[object Array]'</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isDate</span>(<span class="hljs-params">input</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Object</span>.prototype.toString.call(input) === <span class="hljs-string">'[object Date]'</span> ||
            input <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Date</span>;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-26">&#182;</a>
              </div>
              <p>compare two arrays, return the number of differences</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">compareArrays</span>(<span class="hljs-params">array1, array2, dontConvert</span>) </span>{
        <span class="hljs-keyword">var</span> len = <span class="hljs-built_in">Math</span>.min(array1.length, array2.length),
            lengthDiff = <span class="hljs-built_in">Math</span>.abs(array1.length - array2.length),
            diffs = <span class="hljs-number">0</span>,
            i;
        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; len; i++) {
            <span class="hljs-keyword">if</span> ((dontConvert &amp;&amp; array1[i] !== array2[i]) ||
                (!dontConvert &amp;&amp; toInt(array1[i]) !== toInt(array2[i]))) {
                diffs++;
            }
        }
        <span class="hljs-keyword">return</span> diffs + lengthDiff;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeUnits</span>(<span class="hljs-params">units</span>) </span>{
        <span class="hljs-keyword">if</span> (units) {
            <span class="hljs-keyword">var</span> lowered = units.toLowerCase().replace(<span class="hljs-regexp">/(.)s$/</span>, <span class="hljs-string">'$1'</span>);
            units = unitAliases[units] || camelFunctions[lowered] || lowered;
        }
        <span class="hljs-keyword">return</span> units;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeObjectUnits</span>(<span class="hljs-params">inputObject</span>) </span>{
        <span class="hljs-keyword">var</span> normalizedInput = {},
            normalizedProp,
            prop;

        <span class="hljs-keyword">for</span> (prop <span class="hljs-keyword">in</span> inputObject) {
            <span class="hljs-keyword">if</span> (inputObject.hasOwnProperty(prop)) {
                normalizedProp = normalizeUnits(prop);
                <span class="hljs-keyword">if</span> (normalizedProp) {
                    normalizedInput[normalizedProp] = inputObject[prop];
                }
            }
        }

        <span class="hljs-keyword">return</span> normalizedInput;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeList</span>(<span class="hljs-params">field</span>) </span>{
        <span class="hljs-keyword">var</span> count, setter;

        <span class="hljs-keyword">if</span> (field.indexOf(<span class="hljs-string">'week'</span>) === <span class="hljs-number">0</span>) {
            count = <span class="hljs-number">7</span>;
            setter = <span class="hljs-string">'day'</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (field.indexOf(<span class="hljs-string">'month'</span>) === <span class="hljs-number">0</span>) {
            count = <span class="hljs-number">12</span>;
            setter = <span class="hljs-string">'month'</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span>;
        }

        moment[field] = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">format, index</span>) </span>{
            <span class="hljs-keyword">var</span> i, getter,
                method = moment.fn._lang[field],
                results = [];

            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> format === <span class="hljs-string">'number'</span>) {
                index = format;
                format = <span class="hljs-literal">undefined</span>;
            }

            getter = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">i</span>) </span>{
                <span class="hljs-keyword">var</span> m = moment().utc().set(setter, i);
                <span class="hljs-keyword">return</span> method.call(moment.fn._lang, m, format || <span class="hljs-string">''</span>);
            };

            <span class="hljs-keyword">if</span> (index != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> getter(index);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; count; i++) {
                    results.push(getter(i));
                }
                <span class="hljs-keyword">return</span> results;
            }
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toInt</span>(<span class="hljs-params">argumentForCoercion</span>) </span>{
        <span class="hljs-keyword">var</span> coercedNumber = +argumentForCoercion,
            value = <span class="hljs-number">0</span>;

        <span class="hljs-keyword">if</span> (coercedNumber !== <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-built_in">isFinite</span>(coercedNumber)) {
            <span class="hljs-keyword">if</span> (coercedNumber &gt;= <span class="hljs-number">0</span>) {
                value = <span class="hljs-built_in">Math</span>.floor(coercedNumber);
            } <span class="hljs-keyword">else</span> {
                value = <span class="hljs-built_in">Math</span>.ceil(coercedNumber);
            }
        }

        <span class="hljs-keyword">return</span> value;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">daysInMonth</span>(<span class="hljs-params">year, month</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">Date</span>.UTC(year, month + <span class="hljs-number">1</span>, <span class="hljs-number">0</span>)).getUTCDate();
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">weeksInYear</span>(<span class="hljs-params">year, dow, doy</span>) </span>{
        <span class="hljs-keyword">return</span> weekOfYear(moment([year, <span class="hljs-number">11</span>, <span class="hljs-number">31</span> + dow - doy]), dow, doy).week;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">daysInYear</span>(<span class="hljs-params">year</span>) </span>{
        <span class="hljs-keyword">return</span> isLeapYear(year) ? <span class="hljs-number">366</span> : <span class="hljs-number">365</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isLeapYear</span>(<span class="hljs-params">year</span>) </span>{
        <span class="hljs-keyword">return</span> (year % <span class="hljs-number">4</span> === <span class="hljs-number">0</span> &amp;&amp; year % <span class="hljs-number">100</span> !== <span class="hljs-number">0</span>) || year % <span class="hljs-number">400</span> === <span class="hljs-number">0</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkOverflow</span>(<span class="hljs-params">m</span>) </span>{
        <span class="hljs-keyword">var</span> overflow;
        <span class="hljs-keyword">if</span> (m._a &amp;&amp; m._pf.overflow === -<span class="hljs-number">2</span>) {
            overflow =
                m._a[MONTH] &lt; <span class="hljs-number">0</span> || m._a[MONTH] &gt; <span class="hljs-number">11</span> ? MONTH :
                m._a[DATE] &lt; <span class="hljs-number">1</span> || m._a[DATE] &gt; daysInMonth(m._a[YEAR], m._a[MONTH]) ? DATE :
                m._a[HOUR] &lt; <span class="hljs-number">0</span> || m._a[HOUR] &gt; <span class="hljs-number">23</span> ? HOUR :
                m._a[MINUTE] &lt; <span class="hljs-number">0</span> || m._a[MINUTE] &gt; <span class="hljs-number">59</span> ? MINUTE :
                m._a[SECOND] &lt; <span class="hljs-number">0</span> || m._a[SECOND] &gt; <span class="hljs-number">59</span> ? SECOND :
                m._a[MILLISECOND] &lt; <span class="hljs-number">0</span> || m._a[MILLISECOND] &gt; <span class="hljs-number">999</span> ? MILLISECOND : -<span class="hljs-number">1</span>;

            <span class="hljs-keyword">if</span> (m._pf._overflowDayOfYear &amp;&amp; (overflow &lt; YEAR || overflow &gt; DATE)) {
                overflow = DATE;
            }

            m._pf.overflow = overflow;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isValid</span>(<span class="hljs-params">m</span>) </span>{
        <span class="hljs-keyword">if</span> (m._isValid == <span class="hljs-literal">null</span>) {
            m._isValid = !<span class="hljs-built_in">isNaN</span>(m._d.getTime()) &amp;&amp;
                m._pf.overflow &lt; <span class="hljs-number">0</span> &amp;&amp; !m._pf.empty &amp;&amp; !m._pf.invalidMonth &amp;&amp; !m._pf.nullInput &amp;&amp; !m._pf.invalidFormat &amp;&amp; !m._pf.userInvalidated;

            <span class="hljs-keyword">if</span> (m._strict) {
                m._isValid = m._isValid &amp;&amp;
                    m._pf.charsLeftOver === <span class="hljs-number">0</span> &amp;&amp;
                    m._pf.unusedTokens.length === <span class="hljs-number">0</span>;
            }
        }
        <span class="hljs-keyword">return</span> m._isValid;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeLanguage</span>(<span class="hljs-params">key</span>) </span>{
        <span class="hljs-keyword">return</span> key ? key.toLowerCase().replace(<span class="hljs-string">'_'</span>, <span class="hljs-string">'-'</span>) : key;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-27">&#182;</a>
              </div>
              <p>Return a moment from input, that is local/utc/zone equivalent to model.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeAs</span>(<span class="hljs-params">input, model</span>) </span>{
        <span class="hljs-keyword">return</span> model._isUTC ? moment(input).zone(model._offset || <span class="hljs-number">0</span>) :
            moment(input).local();
    }

    <span class="hljs-comment">/************************************
        Languages
    ************************************/</span>


    extend(Language.prototype, {

        set: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">config</span>) </span>{
            <span class="hljs-keyword">var</span> prop, i;
            <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> config) {
                prop = config[i];
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> prop === <span class="hljs-string">'function'</span>) {
                    <span class="hljs-keyword">this</span>[i] = prop;
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">this</span>[<span class="hljs-string">'_'</span> + i] = prop;
                }
            }
        },

        _months: <span class="hljs-string">"January_February_March_April_May_June_July_August_September_October_November_December"</span>.split(<span class="hljs-string">"_"</span>),
        months: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">m</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._months[m.month()];
        },

        _monthsShort: <span class="hljs-string">"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec"</span>.split(<span class="hljs-string">"_"</span>),
        monthsShort: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">m</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._monthsShort[m.month()];
        },

        monthsParse: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">monthName</span>) </span>{
            <span class="hljs-keyword">var</span> i, mom, regex;

            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._monthsParse) {
                <span class="hljs-keyword">this</span>._monthsParse = [];
            }

            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">12</span>; i++) {</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-28">&#182;</a>
              </div>
              <p>make the regex if we don’t have it already</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._monthsParse[i]) {
                    mom = moment.utc([<span class="hljs-number">2000</span>, i]);
                    regex = <span class="hljs-string">'^'</span> + <span class="hljs-keyword">this</span>.months(mom, <span class="hljs-string">''</span>) + <span class="hljs-string">'|^'</span> + <span class="hljs-keyword">this</span>.monthsShort(mom, <span class="hljs-string">''</span>);
                    <span class="hljs-keyword">this</span>._monthsParse[i] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(regex.replace(<span class="hljs-string">'.'</span>, <span class="hljs-string">''</span>), <span class="hljs-string">'i'</span>);
                }</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-29">&#182;</a>
              </div>
              <p>test the regex</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._monthsParse[i].test(monthName)) {
                    <span class="hljs-keyword">return</span> i;
                }
            }
        },

        _weekdays: <span class="hljs-string">"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday"</span>.split(<span class="hljs-string">"_"</span>),
        weekdays: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">m</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._weekdays[m.day()];
        },

        _weekdaysShort: <span class="hljs-string">"Sun_Mon_Tue_Wed_Thu_Fri_Sat"</span>.split(<span class="hljs-string">"_"</span>),
        weekdaysShort: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">m</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._weekdaysShort[m.day()];
        },

        _weekdaysMin: <span class="hljs-string">"Su_Mo_Tu_We_Th_Fr_Sa"</span>.split(<span class="hljs-string">"_"</span>),
        weekdaysMin: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">m</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._weekdaysMin[m.day()];
        },

        weekdaysParse: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">weekdayName</span>) </span>{
            <span class="hljs-keyword">var</span> i, mom, regex;

            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._weekdaysParse) {
                <span class="hljs-keyword">this</span>._weekdaysParse = [];
            }

            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">7</span>; i++) {</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-30">&#182;</a>
              </div>
              <p>make the regex if we don’t have it already</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._weekdaysParse[i]) {
                    mom = moment([<span class="hljs-number">2000</span>, <span class="hljs-number">1</span>]).day(i);
                    regex = <span class="hljs-string">'^'</span> + <span class="hljs-keyword">this</span>.weekdays(mom, <span class="hljs-string">''</span>) + <span class="hljs-string">'|^'</span> + <span class="hljs-keyword">this</span>.weekdaysShort(mom, <span class="hljs-string">''</span>) + <span class="hljs-string">'|^'</span> + <span class="hljs-keyword">this</span>.weekdaysMin(mom, <span class="hljs-string">''</span>);
                    <span class="hljs-keyword">this</span>._weekdaysParse[i] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(regex.replace(<span class="hljs-string">'.'</span>, <span class="hljs-string">''</span>), <span class="hljs-string">'i'</span>);
                }</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-31">&#182;</a>
              </div>
              <p>test the regex</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._weekdaysParse[i].test(weekdayName)) {
                    <span class="hljs-keyword">return</span> i;
                }
            }
        },

        _longDateFormat: {
            LT: <span class="hljs-string">"h:mm A"</span>,
            L: <span class="hljs-string">"MM/DD/YYYY"</span>,
            LL: <span class="hljs-string">"MMMM D YYYY"</span>,
            LLL: <span class="hljs-string">"MMMM D YYYY LT"</span>,
            LLLL: <span class="hljs-string">"dddd, MMMM D YYYY LT"</span>
        },
        longDateFormat: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
            <span class="hljs-keyword">var</span> output = <span class="hljs-keyword">this</span>._longDateFormat[key];
            <span class="hljs-keyword">if</span> (!output &amp;&amp; <span class="hljs-keyword">this</span>._longDateFormat[key.toUpperCase()]) {
                output = <span class="hljs-keyword">this</span>._longDateFormat[key.toUpperCase()].replace(<span class="hljs-regexp">/MMMM|MM|DD|dddd/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) </span>{
                    <span class="hljs-keyword">return</span> val.slice(<span class="hljs-number">1</span>);
                });
                <span class="hljs-keyword">this</span>._longDateFormat[key] = output;
            }
            <span class="hljs-keyword">return</span> output;
        },

        isPM: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-32">&#182;</a>
              </div>
              <p>IE8 Quirks Mode &amp; IE7 Standards Mode do not allow accessing strings like arrays
Using charAt should be more compatible.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">return</span> ((input + <span class="hljs-string">''</span>).toLowerCase().charAt(<span class="hljs-number">0</span>) === <span class="hljs-string">'p'</span>);
        },

        _meridiemParse: <span class="hljs-regexp">/[ap]\.?m?\.?/i</span>,
        meridiem: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">hours, minutes, isLower</span>) </span>{
            <span class="hljs-keyword">if</span> (hours &gt; <span class="hljs-number">11</span>) {
                <span class="hljs-keyword">return</span> isLower ? <span class="hljs-string">'pm'</span> : <span class="hljs-string">'PM'</span>;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> isLower ? <span class="hljs-string">'am'</span> : <span class="hljs-string">'AM'</span>;
            }
        },

        _calendar: {
            sameDay: <span class="hljs-string">'[Today at] LT'</span>,
            nextDay: <span class="hljs-string">'[Tomorrow at] LT'</span>,
            nextWeek: <span class="hljs-string">'dddd [at] LT'</span>,
            lastDay: <span class="hljs-string">'[Yesterday at] LT'</span>,
            lastWeek: <span class="hljs-string">'[Last] dddd [at] LT'</span>,
            sameElse: <span class="hljs-string">'L'</span>
        },
        calendar: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key, mom</span>) </span>{
            <span class="hljs-keyword">var</span> output = <span class="hljs-keyword">this</span>._calendar[key];
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> output === <span class="hljs-string">'function'</span> ? output.apply(mom) : output;
        },

        _relativeTime: {
            future: <span class="hljs-string">"in %s"</span>,
            past: <span class="hljs-string">"%s ago"</span>,
            s: <span class="hljs-string">"a few seconds"</span>,
            m: <span class="hljs-string">"a minute"</span>,
            mm: <span class="hljs-string">"%d minutes"</span>,
            h: <span class="hljs-string">"an hour"</span>,
            hh: <span class="hljs-string">"%d hours"</span>,
            d: <span class="hljs-string">"a day"</span>,
            dd: <span class="hljs-string">"%d days"</span>,
            M: <span class="hljs-string">"a month"</span>,
            MM: <span class="hljs-string">"%d months"</span>,
            y: <span class="hljs-string">"a year"</span>,
            yy: <span class="hljs-string">"%d years"</span>
        },
        relativeTime: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">number, withoutSuffix, string, isFuture</span>) </span>{
            <span class="hljs-keyword">var</span> output = <span class="hljs-keyword">this</span>._relativeTime[string];
            <span class="hljs-keyword">return</span> (<span class="hljs-keyword">typeof</span> output === <span class="hljs-string">'function'</span>) ?
                output(number, withoutSuffix, string, isFuture) :
                output.replace(<span class="hljs-regexp">/%d/i</span>, number);
        },
        pastFuture: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">diff, output</span>) </span>{
            <span class="hljs-keyword">var</span> format = <span class="hljs-keyword">this</span>._relativeTime[diff &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">'future'</span> : <span class="hljs-string">'past'</span>];
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> format === <span class="hljs-string">'function'</span> ? format(output) : format.replace(<span class="hljs-regexp">/%s/i</span>, output);
        },

        ordinal: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">number</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._ordinal.replace(<span class="hljs-string">"%d"</span>, number);
        },
        _ordinal: <span class="hljs-string">"%d"</span>,

        preparse: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">string</span>) </span>{
            <span class="hljs-keyword">return</span> string;
        },

        postformat: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">string</span>) </span>{
            <span class="hljs-keyword">return</span> string;
        },

        week: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">mom</span>) </span>{
            <span class="hljs-keyword">return</span> weekOfYear(mom, <span class="hljs-keyword">this</span>._week.dow, <span class="hljs-keyword">this</span>._week.doy).week;
        },

        _week: {
            dow: <span class="hljs-number">0</span>, <span class="hljs-comment">// Sunday is the first day of the week.</span>
            doy: <span class="hljs-number">6</span> <span class="hljs-comment">// The week that contains Jan 1st is the first week of the year.</span>
        },

        _invalidDate: <span class="hljs-string">'Invalid date'</span>,
        invalidDate: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._invalidDate;
        }
    });</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-33">&#182;</a>
              </div>
              <p>Loads a language definition into the <code>languages</code> cache.  The function
takes a key and optionally values.  If not in the browser and no values
are provided, it will load the language file module.  As a convenience,
this function also returns the language values.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadLang</span>(<span class="hljs-params">key, values</span>) </span>{
        values.abbr = key;
        <span class="hljs-keyword">if</span> (!languages[key]) {
            languages[key] = <span class="hljs-keyword">new</span> Language();
        }
        languages[key].set(values);
        <span class="hljs-keyword">return</span> languages[key];
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-34">&#182;</a>
              </div>
              <p>Remove a language from the <code>languages</code> cache. Mostly useful in tests.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unloadLang</span>(<span class="hljs-params">key</span>) </span>{
        <span class="hljs-keyword">delete</span> languages[key];
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-35">&#182;</a>
              </div>
              <p>Determines which language definition to use and returns it.</p>
<p>With no parameters, it will return the global language.  If you
pass in a language key, such as ‘en’, it will return the
definition for ‘en’, so long as ‘en’ has already been loaded using
moment.lang.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getLangDefinition</span>(<span class="hljs-params">key</span>) </span>{
        <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>,
            j, lang, next, split,
            get = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">k</span>) </span>{
                <span class="hljs-keyword">if</span> (!languages[k] &amp;&amp; hasModule) {
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-built_in">require</span>(<span class="hljs-string">'./lang/'</span> + k);
                    } <span class="hljs-keyword">catch</span> (e) {}
                }
                <span class="hljs-keyword">return</span> languages[k];
            };

        <span class="hljs-keyword">if</span> (!key) {
            <span class="hljs-keyword">return</span> moment.fn._lang;
        }

        <span class="hljs-keyword">if</span> (!isArray(key)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-36">&#182;</a>
              </div>
              <p>short-circuit everything else</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            lang = get(key);
            <span class="hljs-keyword">if</span> (lang) {
                <span class="hljs-keyword">return</span> lang;
            }
            key = [key];
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-37">&#182;</a>
              </div>
              <p>pick the language from the array
try [‘en-au’, ‘en-gb’] as ‘en-au’, ‘en-gb’, ‘en’, as in move through the list trying each
substring from most specific to least, but move to the next array item if it’s a more specific variant than the current root</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">while</span> (i &lt; key.length) {
            split = normalizeLanguage(key[i]).split(<span class="hljs-string">'-'</span>);
            j = split.length;
            next = normalizeLanguage(key[i + <span class="hljs-number">1</span>]);
            next = next ? next.split(<span class="hljs-string">'-'</span>) : <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">while</span> (j &gt; <span class="hljs-number">0</span>) {
                lang = get(split.slice(<span class="hljs-number">0</span>, j).join(<span class="hljs-string">'-'</span>));
                <span class="hljs-keyword">if</span> (lang) {
                    <span class="hljs-keyword">return</span> lang;
                }
                <span class="hljs-keyword">if</span> (next &amp;&amp; next.length &gt;= j &amp;&amp; compareArrays(split, next, <span class="hljs-literal">true</span>) &gt;= j - <span class="hljs-number">1</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-38">&#182;</a>
              </div>
              <p>the next array item is better than a shallower substring of this one</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    <span class="hljs-keyword">break</span>;
                }
                j--;
            }
            i++;
        }
        <span class="hljs-keyword">return</span> moment.fn._lang;
    }

    <span class="hljs-comment">/************************************
        Formatting
    ************************************/</span>


    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">removeFormattingTokens</span>(<span class="hljs-params">input</span>) </span>{
        <span class="hljs-keyword">if</span> (input.match(<span class="hljs-regexp">/\[[\s\S]/</span>)) {
            <span class="hljs-keyword">return</span> input.replace(<span class="hljs-regexp">/^\[|\]$/g</span>, <span class="hljs-string">""</span>);
        }
        <span class="hljs-keyword">return</span> input.replace(<span class="hljs-regexp">/\\/g</span>, <span class="hljs-string">""</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeFormatFunction</span>(<span class="hljs-params">format</span>) </span>{
        <span class="hljs-keyword">var</span> array = format.match(formattingTokens),
            i, length;

        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, length = array.length; i &lt; length; i++) {
            <span class="hljs-keyword">if</span> (formatTokenFunctions[array[i]]) {
                array[i] = formatTokenFunctions[array[i]];
            } <span class="hljs-keyword">else</span> {
                array[i] = removeFormattingTokens(array[i]);
            }
        }

        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">mom</span>) </span>{
            <span class="hljs-keyword">var</span> output = <span class="hljs-string">""</span>;
            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; length; i++) {
                output += array[i] <span class="hljs-keyword">instanceof</span> <span class="hljs-built_in">Function</span> ? array[i].call(mom, format) : array[i];
            }
            <span class="hljs-keyword">return</span> output;
        };
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-39">&#182;</a>
              </div>
              <p>format date using native date object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">formatMoment</span>(<span class="hljs-params">m, format</span>) </span>{

        <span class="hljs-keyword">if</span> (!m.isValid()) {
            <span class="hljs-keyword">return</span> m.lang().invalidDate();
        }

        format = expandFormat(format, m.lang());

        <span class="hljs-keyword">if</span> (!formatFunctions[format]) {
            formatFunctions[format] = makeFormatFunction(format);
        }

        <span class="hljs-keyword">return</span> formatFunctions[format](m);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">expandFormat</span>(<span class="hljs-params">format, lang</span>) </span>{
        <span class="hljs-keyword">var</span> i = <span class="hljs-number">5</span>;

        <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replaceLongDateFormatTokens</span>(<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">return</span> lang.longDateFormat(input) || input;
        }

        localFormattingTokens.lastIndex = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">while</span> (i &gt;= <span class="hljs-number">0</span> &amp;&amp; localFormattingTokens.test(format)) {
            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);
            localFormattingTokens.lastIndex = <span class="hljs-number">0</span>;
            i -= <span class="hljs-number">1</span>;
        }

        <span class="hljs-keyword">return</span> format;
    }


    <span class="hljs-comment">/************************************
        Parsing
    ************************************/</span></pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-40">&#182;</a>
              </div>
              <p>get the regex to find the next token</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getParseRegexForToken</span>(<span class="hljs-params">token, config</span>) </span>{
        <span class="hljs-keyword">var</span> a, strict = config._strict;
        <span class="hljs-keyword">switch</span> (token) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'Q'</span>:
            <span class="hljs-keyword">return</span> parseTokenOneDigit;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'DDDD'</span>:
            <span class="hljs-keyword">return</span> parseTokenThreeDigits;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'YYYY'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'GGGG'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'gggg'</span>:
            <span class="hljs-keyword">return</span> strict ? parseTokenFourDigits : parseTokenOneToFourDigits;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'Y'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'G'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'g'</span>:
            <span class="hljs-keyword">return</span> parseTokenSignedNumber;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'YYYYYY'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'YYYYY'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'GGGGG'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ggggg'</span>:
            <span class="hljs-keyword">return</span> strict ? parseTokenSixDigits : parseTokenOneToSixDigits;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'S'</span>:
            <span class="hljs-keyword">if</span> (strict) {
                <span class="hljs-keyword">return</span> parseTokenOneDigit;
            }
            <span class="hljs-comment">/* falls through */</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'SS'</span>:
            <span class="hljs-keyword">if</span> (strict) {
                <span class="hljs-keyword">return</span> parseTokenTwoDigits;
            }
            <span class="hljs-comment">/* falls through */</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'SSS'</span>:
            <span class="hljs-keyword">if</span> (strict) {
                <span class="hljs-keyword">return</span> parseTokenThreeDigits;
            }
            <span class="hljs-comment">/* falls through */</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'DDD'</span>:
            <span class="hljs-keyword">return</span> parseTokenOneToThreeDigits;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'MMM'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'MMMM'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'dd'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ddd'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'dddd'</span>:
            <span class="hljs-keyword">return</span> parseTokenWord;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'a'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'A'</span>:
            <span class="hljs-keyword">return</span> getLangDefinition(config._l)._meridiemParse;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'X'</span>:
            <span class="hljs-keyword">return</span> parseTokenTimestampMs;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'Z'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ZZ'</span>:
            <span class="hljs-keyword">return</span> parseTokenTimezone;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'T'</span>:
            <span class="hljs-keyword">return</span> parseTokenT;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'SSSS'</span>:
            <span class="hljs-keyword">return</span> parseTokenDigits;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'MM'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'DD'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'YY'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'GG'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'gg'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'HH'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'hh'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'mm'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ss'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ww'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'WW'</span>:
            <span class="hljs-keyword">return</span> strict ? parseTokenTwoDigits : parseTokenOneOrTwoDigits;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'M'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'D'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'d'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'H'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'h'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'m'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'s'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'w'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'W'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'e'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'E'</span>:
            <span class="hljs-keyword">return</span> parseTokenOneOrTwoDigits;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'Do'</span>:
            <span class="hljs-keyword">return</span> parseTokenOrdinal;
        <span class="hljs-keyword">default</span>:
            a = <span class="hljs-keyword">new</span> <span class="hljs-built_in">RegExp</span>(regexpEscape(unescapeFormat(token.replace(<span class="hljs-string">'\\'</span>, <span class="hljs-string">''</span>)), <span class="hljs-string">"i"</span>));
            <span class="hljs-keyword">return</span> a;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timezoneMinutesFromString</span>(<span class="hljs-params">string</span>) </span>{
        string = string || <span class="hljs-string">""</span>;
        <span class="hljs-keyword">var</span> possibleTzMatches = (string.match(parseTokenTimezone) || []),
            tzChunk = possibleTzMatches[possibleTzMatches.length - <span class="hljs-number">1</span>] || [],
            parts = (tzChunk + <span class="hljs-string">''</span>).match(parseTimezoneChunker) || [<span class="hljs-string">'-'</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],
            minutes = +(parts[<span class="hljs-number">1</span>] * <span class="hljs-number">60</span>) + toInt(parts[<span class="hljs-number">2</span>]);

        <span class="hljs-keyword">return</span> parts[<span class="hljs-number">0</span>] === <span class="hljs-string">'+'</span> ? -minutes : minutes;
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-41">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-41">&#182;</a>
              </div>
              <p>function to convert string input to date</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addTimeToArrayFromToken</span>(<span class="hljs-params">token, input, config</span>) </span>{
        <span class="hljs-keyword">var</span> a, datePartArray = config._a;

        <span class="hljs-keyword">switch</span> (token) {</pre></div></div>
            
        </li>
        
        
        <li id="section-42">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-42">&#182;</a>
              </div>
              <p>QUARTER</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">case</span> <span class="hljs-string">'Q'</span>:
            <span class="hljs-keyword">if</span> (input != <span class="hljs-literal">null</span>) {
                datePartArray[MONTH] = (toInt(input) - <span class="hljs-number">1</span>) * <span class="hljs-number">3</span>;
            }
            <span class="hljs-keyword">break</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-43">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-43">&#182;</a>
              </div>
              <p>MONTH</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">case</span> <span class="hljs-string">'M'</span>: <span class="hljs-comment">// fall through to MM</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'MM'</span>:
            <span class="hljs-keyword">if</span> (input != <span class="hljs-literal">null</span>) {
                datePartArray[MONTH] = toInt(input) - <span class="hljs-number">1</span>;
            }
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'MMM'</span>: <span class="hljs-comment">// fall through to MMMM</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'MMMM'</span>:
            a = getLangDefinition(config._l).monthsParse(input);</pre></div></div>
            
        </li>
        
        
        <li id="section-44">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-44">&#182;</a>
              </div>
              <p>if we didn’t find a month name, mark the date as invalid.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (a != <span class="hljs-literal">null</span>) {
                datePartArray[MONTH] = a;
            } <span class="hljs-keyword">else</span> {
                config._pf.invalidMonth = input;
            }
            <span class="hljs-keyword">break</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-45">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-45">&#182;</a>
              </div>
              <p>DAY OF MONTH</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">case</span> <span class="hljs-string">'D'</span>: <span class="hljs-comment">// fall through to DD</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'DD'</span>:
            <span class="hljs-keyword">if</span> (input != <span class="hljs-literal">null</span>) {
                datePartArray[DATE] = toInt(input);
            }
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'Do'</span>:
            <span class="hljs-keyword">if</span> (input != <span class="hljs-literal">null</span>) {
                datePartArray[DATE] = toInt(<span class="hljs-built_in">parseInt</span>(input, <span class="hljs-number">10</span>));
            }
            <span class="hljs-keyword">break</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-46">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-46">&#182;</a>
              </div>
              <p>DAY OF YEAR</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">case</span> <span class="hljs-string">'DDD'</span>: <span class="hljs-comment">// fall through to DDDD</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'DDDD'</span>:
            <span class="hljs-keyword">if</span> (input != <span class="hljs-literal">null</span>) {
                config._dayOfYear = toInt(input);
            }

            <span class="hljs-keyword">break</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-47">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-47">&#182;</a>
              </div>
              <p>YEAR</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">case</span> <span class="hljs-string">'YY'</span>:
            datePartArray[YEAR] = moment.parseTwoDigitYear(input);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'YYYY'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'YYYYY'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'YYYYYY'</span>:
            datePartArray[YEAR] = toInt(input);
            <span class="hljs-keyword">break</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-48">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-48">&#182;</a>
              </div>
              <p>AM / PM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">case</span> <span class="hljs-string">'a'</span>: <span class="hljs-comment">// fall through to A</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'A'</span>:
            config._isPm = getLangDefinition(config._l).isPM(input);
            <span class="hljs-keyword">break</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-49">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-49">&#182;</a>
              </div>
              <p>24 HOUR</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">case</span> <span class="hljs-string">'H'</span>: <span class="hljs-comment">// fall through to hh</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'HH'</span>: <span class="hljs-comment">// fall through to hh</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'h'</span>: <span class="hljs-comment">// fall through to hh</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'hh'</span>:
            datePartArray[HOUR] = toInt(input);
            <span class="hljs-keyword">break</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-50">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-50">&#182;</a>
              </div>
              <p>MINUTE</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">case</span> <span class="hljs-string">'m'</span>: <span class="hljs-comment">// fall through to mm</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'mm'</span>:
            datePartArray[MINUTE] = toInt(input);
            <span class="hljs-keyword">break</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-51">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-51">&#182;</a>
              </div>
              <p>SECOND</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">case</span> <span class="hljs-string">'s'</span>: <span class="hljs-comment">// fall through to ss</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ss'</span>:
            datePartArray[SECOND] = toInt(input);
            <span class="hljs-keyword">break</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-52">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-52">&#182;</a>
              </div>
              <p>MILLISECOND</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">case</span> <span class="hljs-string">'S'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'SS'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'SSS'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'SSSS'</span>:
            datePartArray[MILLISECOND] = toInt((<span class="hljs-string">'0.'</span> + input) * <span class="hljs-number">1000</span>);
            <span class="hljs-keyword">break</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-53">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-53">&#182;</a>
              </div>
              <p>UNIX TIMESTAMP WITH MS</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">case</span> <span class="hljs-string">'X'</span>:
            config._d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">parseFloat</span>(input) * <span class="hljs-number">1000</span>);
            <span class="hljs-keyword">break</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-54">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-54">&#182;</a>
              </div>
              <p>TIMEZONE</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">case</span> <span class="hljs-string">'Z'</span>: <span class="hljs-comment">// fall through to ZZ</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ZZ'</span>:
            config._useUTC = <span class="hljs-literal">true</span>;
            config._tzm = timezoneMinutesFromString(input);
            <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'w'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ww'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'W'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'WW'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'d'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'dd'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'ddd'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'dddd'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'e'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'E'</span>:
            token = token.substr(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
            <span class="hljs-comment">/* falls through */</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'gg'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'gggg'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'GG'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'GGGG'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'GGGGG'</span>:
            token = token.substr(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>);
            <span class="hljs-keyword">if</span> (input) {
                config._w = config._w || {};
                config._w[token] = input;
            }
            <span class="hljs-keyword">break</span>;
        }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-55">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-55">&#182;</a>
              </div>
              <p>convert an array to a date.
the array should mirror the parameters below
note: all values past the year are optional and will default to the lowest possible value.
[year, month, day , hour, minute, second, millisecond]</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dateFromConfig</span>(<span class="hljs-params">config</span>) </span>{
        <span class="hljs-keyword">var</span> i, date, input = [],
            currentDate,
            yearToUse, fixYear, w, temp, lang, weekday, week;

        <span class="hljs-keyword">if</span> (config._d) {
            <span class="hljs-keyword">return</span>;
        }

        currentDate = currentDateArray(config);</pre></div></div>
            
        </li>
        
        
        <li id="section-56">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-56">&#182;</a>
              </div>
              <p>compute day of the year from weeks and weekdays</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (config._w &amp;&amp; config._a[DATE] == <span class="hljs-literal">null</span> &amp;&amp; config._a[MONTH] == <span class="hljs-literal">null</span>) {
            fixYear = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) </span>{
                <span class="hljs-keyword">var</span> intVal = <span class="hljs-built_in">parseInt</span>(val, <span class="hljs-number">10</span>);
                <span class="hljs-keyword">return</span> val ?
                    (val.length &lt; <span class="hljs-number">3</span> ? (intVal &gt; <span class="hljs-number">68</span> ? <span class="hljs-number">1900</span> + intVal : <span class="hljs-number">2000</span> + intVal) : intVal) :
                    (config._a[YEAR] == <span class="hljs-literal">null</span> ? moment().weekYear() : config._a[YEAR]);
            };

            w = config._w;
            <span class="hljs-keyword">if</span> (w.GG != <span class="hljs-literal">null</span> || w.W != <span class="hljs-literal">null</span> || w.E != <span class="hljs-literal">null</span>) {
                temp = dayOfYearFromWeeks(fixYear(w.GG), w.W || <span class="hljs-number">1</span>, w.E, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>);
            } <span class="hljs-keyword">else</span> {
                lang = getLangDefinition(config._l);
                weekday = w.d != <span class="hljs-literal">null</span> ? parseWeekday(w.d, lang) :
                    (w.e != <span class="hljs-literal">null</span> ? <span class="hljs-built_in">parseInt</span>(w.e, <span class="hljs-number">10</span>) + lang._week.dow : <span class="hljs-number">0</span>);

                week = <span class="hljs-built_in">parseInt</span>(w.w, <span class="hljs-number">10</span>) || <span class="hljs-number">1</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-57">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-57">&#182;</a>
              </div>
              <p>if we’re parsing ‘d’, then the low day numbers may be next week</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">if</span> (w.d != <span class="hljs-literal">null</span> &amp;&amp; weekday &lt; lang._week.dow) {
                    week++;
                }

                temp = dayOfYearFromWeeks(fixYear(w.gg), week, weekday, lang._week.doy, lang._week.dow);
            }

            config._a[YEAR] = temp.year;
            config._dayOfYear = temp.dayOfYear;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-58">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-58">&#182;</a>
              </div>
              <p>if the day of the year is set, figure out what it is</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (config._dayOfYear) {
            yearToUse = config._a[YEAR] == <span class="hljs-literal">null</span> ? currentDate[YEAR] : config._a[YEAR];

            <span class="hljs-keyword">if</span> (config._dayOfYear &gt; daysInYear(yearToUse)) {
                config._pf._overflowDayOfYear = <span class="hljs-literal">true</span>;
            }

            date = makeUTCDate(yearToUse, <span class="hljs-number">0</span>, config._dayOfYear);
            config._a[MONTH] = date.getUTCMonth();
            config._a[DATE] = date.getUTCDate();
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-59">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-59">&#182;</a>
              </div>
              <p>Default to current date.</p>
<ul>
<li>if no year, month, day of month are given, default to today</li>
<li>if day of month is given, default month and year</li>
<li>if month is given, default only year</li>
<li>if year is given, don’t default anything</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span> &amp;&amp; config._a[i] == <span class="hljs-literal">null</span>; ++i) {
            config._a[i] = input[i] = currentDate[i];
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-60">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-60">&#182;</a>
              </div>
              <p>Zero out whatever was not defaulted, including time</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">for</span> (; i &lt; <span class="hljs-number">7</span>; i++) {
            config._a[i] = input[i] = (config._a[i] == <span class="hljs-literal">null</span>) ? (i === <span class="hljs-number">2</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>) : config._a[i];
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-61">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-61">&#182;</a>
              </div>
              <p>add the offsets to the time to be parsed so that we can have a clean array for checking isValid</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        input[HOUR] += toInt((config._tzm || <span class="hljs-number">0</span>) / <span class="hljs-number">60</span>);
        input[MINUTE] += toInt((config._tzm || <span class="hljs-number">0</span>) % <span class="hljs-number">60</span>);

        config._d = (config._useUTC ? makeUTCDate : makeDate).apply(<span class="hljs-literal">null</span>, input);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dateFromObject</span>(<span class="hljs-params">config</span>) </span>{
        <span class="hljs-keyword">var</span> normalizedInput;

        <span class="hljs-keyword">if</span> (config._d) {
            <span class="hljs-keyword">return</span>;
        }

        normalizedInput = normalizeObjectUnits(config._i);
        config._a = [
            normalizedInput.year,
            normalizedInput.month,
            normalizedInput.day,
            normalizedInput.hour,
            normalizedInput.minute,
            normalizedInput.second,
            normalizedInput.millisecond
        ];

        dateFromConfig(config);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">currentDateArray</span>(<span class="hljs-params">config</span>) </span>{
        <span class="hljs-keyword">var</span> now = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
        <span class="hljs-keyword">if</span> (config._useUTC) {
            <span class="hljs-keyword">return</span> [
                now.getUTCFullYear(),
                now.getUTCMonth(),
                now.getUTCDate()
            ];
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> [now.getFullYear(), now.getMonth(), now.getDate()];
        }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-62">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-62">&#182;</a>
              </div>
              <p>date from string and format string</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeDateFromStringAndFormat</span>(<span class="hljs-params">config</span>) </span>{

        config._a = [];
        config._pf.empty = <span class="hljs-literal">true</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-63">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-63">&#182;</a>
              </div>
              <p>This array is used to make a Date, either with <code>new Date</code> or <code>Date.UTC</code></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> lang = getLangDefinition(config._l),
            string = <span class="hljs-string">''</span> + config._i,
            i, parsedInput, tokens, token, skipped,
            stringLength = string.length,
            totalParsedInputLength = <span class="hljs-number">0</span>;

        tokens = expandFormat(config._f, lang).match(formattingTokens) || [];

        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; tokens.length; i++) {
            token = tokens[i];
            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[<span class="hljs-number">0</span>];
            <span class="hljs-keyword">if</span> (parsedInput) {
                skipped = string.substr(<span class="hljs-number">0</span>, string.indexOf(parsedInput));
                <span class="hljs-keyword">if</span> (skipped.length &gt; <span class="hljs-number">0</span>) {
                    config._pf.unusedInput.push(skipped);
                }
                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);
                totalParsedInputLength += parsedInput.length;
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-64">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-64">&#182;</a>
              </div>
              <p>don’t parse if it’s not a known token</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (formatTokenFunctions[token]) {
                <span class="hljs-keyword">if</span> (parsedInput) {
                    config._pf.empty = <span class="hljs-literal">false</span>;
                } <span class="hljs-keyword">else</span> {
                    config._pf.unusedTokens.push(token);
                }
                addTimeToArrayFromToken(token, parsedInput, config);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (config._strict &amp;&amp; !parsedInput) {
                config._pf.unusedTokens.push(token);
            }
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-65">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-65">&#182;</a>
              </div>
              <p>add remaining unparsed input length to the string</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        config._pf.charsLeftOver = stringLength - totalParsedInputLength;
        <span class="hljs-keyword">if</span> (string.length &gt; <span class="hljs-number">0</span>) {
            config._pf.unusedInput.push(string);
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-66">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-66">&#182;</a>
              </div>
              <p>handle am pm</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (config._isPm &amp;&amp; config._a[HOUR] &lt; <span class="hljs-number">12</span>) {
            config._a[HOUR] += <span class="hljs-number">12</span>;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-67">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-67">&#182;</a>
              </div>
              <p>if is 12 am, change hours to 0</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (config._isPm === <span class="hljs-literal">false</span> &amp;&amp; config._a[HOUR] === <span class="hljs-number">12</span>) {
            config._a[HOUR] = <span class="hljs-number">0</span>;
        }

        dateFromConfig(config);
        checkOverflow(config);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unescapeFormat</span>(<span class="hljs-params">s</span>) </span>{
        <span class="hljs-keyword">return</span> s.replace(<span class="hljs-regexp">/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">matched, p1, p2, p3, p4</span>) </span>{
            <span class="hljs-keyword">return</span> p1 || p2 || p3 || p4;
        });
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-68">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-68">&#182;</a>
              </div>
              <p>Code from <a href="http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript">http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">regexpEscape</span>(<span class="hljs-params">s</span>) </span>{
        <span class="hljs-keyword">return</span> s.replace(<span class="hljs-regexp">/[-\/\\^$*+?.()|[\]{}]/g</span>, <span class="hljs-string">'\\$&amp;'</span>);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-69">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-69">&#182;</a>
              </div>
              <p>date from string and array of format strings</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeDateFromStringAndArray</span>(<span class="hljs-params">config</span>) </span>{
        <span class="hljs-keyword">var</span> tempConfig,
            bestMoment,

            scoreToBeat,
            i,
            currentScore;

        <span class="hljs-keyword">if</span> (config._f.length === <span class="hljs-number">0</span>) {
            config._pf.invalidFormat = <span class="hljs-literal">true</span>;
            config._d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-literal">NaN</span>);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; config._f.length; i++) {
            currentScore = <span class="hljs-number">0</span>;
            tempConfig = extend({}, config);
            tempConfig._pf = defaultParsingFlags();
            tempConfig._f = config._f[i];
            makeDateFromStringAndFormat(tempConfig);

            <span class="hljs-keyword">if</span> (!isValid(tempConfig)) {
                <span class="hljs-keyword">continue</span>;
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-70">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-70">&#182;</a>
              </div>
              <p>if there is any input that was not parsed add a penalty for that format</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            currentScore += tempConfig._pf.charsLeftOver;</pre></div></div>
            
        </li>
        
        
        <li id="section-71">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-71">&#182;</a>
              </div>
              <p>or tokens</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            currentScore += tempConfig._pf.unusedTokens.length * <span class="hljs-number">10</span>;

            tempConfig._pf.score = currentScore;

            <span class="hljs-keyword">if</span> (scoreToBeat == <span class="hljs-literal">null</span> || currentScore &lt; scoreToBeat) {
                scoreToBeat = currentScore;
                bestMoment = tempConfig;
            }
        }

        extend(config, bestMoment || tempConfig);
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-72">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-72">&#182;</a>
              </div>
              <p>date from iso format</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeDateFromString</span>(<span class="hljs-params">config</span>) </span>{
        <span class="hljs-keyword">var</span> i, l,
            string = config._i,
            match = isoRegex.exec(string);

        <span class="hljs-keyword">if</span> (match) {
            config._pf.iso = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, l = isoDates.length; i &lt; l; i++) {
                <span class="hljs-keyword">if</span> (isoDates[i][<span class="hljs-number">1</span>].exec(string)) {</pre></div></div>
            
        </li>
        
        
        <li id="section-73">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-73">&#182;</a>
              </div>
              <p>match[5] should be “T” or undefined</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    config._f = isoDates[i][<span class="hljs-number">0</span>] + (match[<span class="hljs-number">6</span>] || <span class="hljs-string">" "</span>);
                    <span class="hljs-keyword">break</span>;
                }
            }
            <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>, l = isoTimes.length; i &lt; l; i++) {
                <span class="hljs-keyword">if</span> (isoTimes[i][<span class="hljs-number">1</span>].exec(string)) {
                    config._f += isoTimes[i][<span class="hljs-number">0</span>];
                    <span class="hljs-keyword">break</span>;
                }
            }
            <span class="hljs-keyword">if</span> (string.match(parseTokenTimezone)) {
                config._f += <span class="hljs-string">"Z"</span>;
            }
            makeDateFromStringAndFormat(config);
        } <span class="hljs-keyword">else</span> {
            moment.createFromInputFallback(config);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeDateFromInput</span>(<span class="hljs-params">config</span>) </span>{
        <span class="hljs-keyword">var</span> input = config._i,
            matched = aspNetJsonRegex.exec(input);

        <span class="hljs-keyword">if</span> (input === <span class="hljs-literal">undefined</span>) {
            config._d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>();
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (matched) {
            config._d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(+matched[<span class="hljs-number">1</span>]);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">'string'</span>) {
            makeDateFromString(config);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isArray(input)) {
            config._a = input.slice(<span class="hljs-number">0</span>);
            dateFromConfig(config);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isDate(input)) {
            config._d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(+input);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> (input) === <span class="hljs-string">'object'</span>) {
            dateFromObject(config);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> (input) === <span class="hljs-string">'number'</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-74">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-74">&#182;</a>
              </div>
              <p>from milliseconds</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            config._d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(input);
        } <span class="hljs-keyword">else</span> {
            moment.createFromInputFallback(config);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeDate</span>(<span class="hljs-params">y, m, d, h, M, s, ms</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-75">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-75">&#182;</a>
              </div>
              <p>can’t just apply() to create a date:
<a href="http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply">http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(y, m, d, h, M, s, ms);</pre></div></div>
            
        </li>
        
        
        <li id="section-76">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-76">&#182;</a>
              </div>
              <p>the date constructor doesn’t accept years &lt; 1970</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (y &lt; <span class="hljs-number">1970</span>) {
            date.setFullYear(y);
        }
        <span class="hljs-keyword">return</span> date;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeUTCDate</span>(<span class="hljs-params">y</span>) </span>{
        <span class="hljs-keyword">var</span> date = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-built_in">Date</span>.UTC.apply(<span class="hljs-literal">null</span>, <span class="hljs-built_in">arguments</span>));
        <span class="hljs-keyword">if</span> (y &lt; <span class="hljs-number">1970</span>) {
            date.setUTCFullYear(y);
        }
        <span class="hljs-keyword">return</span> date;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseWeekday</span>(<span class="hljs-params">input, language</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">'string'</span>) {
            <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">isNaN</span>(input)) {
                input = <span class="hljs-built_in">parseInt</span>(input, <span class="hljs-number">10</span>);
            } <span class="hljs-keyword">else</span> {
                input = language.weekdaysParse(input);
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input !== <span class="hljs-string">'number'</span>) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
                }
            }
        }
        <span class="hljs-keyword">return</span> input;
    }

    <span class="hljs-comment">/************************************
        Relative Time
    ************************************/</span></pre></div></div>
            
        </li>
        
        
        <li id="section-77">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-77">&#182;</a>
              </div>
              <p>helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">substituteTimeAgo</span>(<span class="hljs-params">string, number, withoutSuffix, isFuture, lang</span>) </span>{
        <span class="hljs-keyword">return</span> lang.relativeTime(number || <span class="hljs-number">1</span>, !! withoutSuffix, string, isFuture);
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">relativeTime</span>(<span class="hljs-params">milliseconds, withoutSuffix, lang</span>) </span>{
        <span class="hljs-keyword">var</span> seconds = round(<span class="hljs-built_in">Math</span>.abs(milliseconds) / <span class="hljs-number">1000</span>),
            minutes = round(seconds / <span class="hljs-number">60</span>),
            hours = round(minutes / <span class="hljs-number">60</span>),
            days = round(hours / <span class="hljs-number">24</span>),
            years = round(days / <span class="hljs-number">365</span>),
            args = seconds &lt; <span class="hljs-number">45</span> &amp;&amp; [<span class="hljs-string">'s'</span>, seconds] ||
                minutes === <span class="hljs-number">1</span> &amp;&amp; [<span class="hljs-string">'m'</span>] ||
                minutes &lt; <span class="hljs-number">45</span> &amp;&amp; [<span class="hljs-string">'mm'</span>, minutes] ||
                hours === <span class="hljs-number">1</span> &amp;&amp; [<span class="hljs-string">'h'</span>] ||
                hours &lt; <span class="hljs-number">22</span> &amp;&amp; [<span class="hljs-string">'hh'</span>, hours] ||
                days === <span class="hljs-number">1</span> &amp;&amp; [<span class="hljs-string">'d'</span>] ||
                days &lt;= <span class="hljs-number">25</span> &amp;&amp; [<span class="hljs-string">'dd'</span>, days] ||
                days &lt;= <span class="hljs-number">45</span> &amp;&amp; [<span class="hljs-string">'M'</span>] ||
                days &lt; <span class="hljs-number">345</span> &amp;&amp; [<span class="hljs-string">'MM'</span>, round(days / <span class="hljs-number">30</span>)] ||
                years === <span class="hljs-number">1</span> &amp;&amp; [<span class="hljs-string">'y'</span>] || [<span class="hljs-string">'yy'</span>, years];
        args[<span class="hljs-number">2</span>] = withoutSuffix;
        args[<span class="hljs-number">3</span>] = milliseconds &gt; <span class="hljs-number">0</span>;
        args[<span class="hljs-number">4</span>] = lang;
        <span class="hljs-keyword">return</span> substituteTimeAgo.apply({}, args);
    }


    <span class="hljs-comment">/************************************
        Week of Year
    ************************************/</span></pre></div></div>
            
        </li>
        
        
        <li id="section-78">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-78">&#182;</a>
              </div>
              <p>firstDayOfWeek       0 = sun, 6 = sat
                     the day of the week that starts the week
                     (usually sunday or monday)
firstDayOfWeekOfYear 0 = sun, 6 = sat
                     the first week is the week that contains the first
                     of this day of the week
                     (eg. ISO weeks use thursday (4))</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">weekOfYear</span>(<span class="hljs-params">mom, firstDayOfWeek, firstDayOfWeekOfYear</span>) </span>{
        <span class="hljs-keyword">var</span> end = firstDayOfWeekOfYear - firstDayOfWeek,
            daysToDayOfWeek = firstDayOfWeekOfYear - mom.day(),
            adjustedMoment;


        <span class="hljs-keyword">if</span> (daysToDayOfWeek &gt; end) {
            daysToDayOfWeek -= <span class="hljs-number">7</span>;
        }

        <span class="hljs-keyword">if</span> (daysToDayOfWeek &lt; end - <span class="hljs-number">7</span>) {
            daysToDayOfWeek += <span class="hljs-number">7</span>;
        }

        adjustedMoment = moment(mom).add(<span class="hljs-string">'d'</span>, daysToDayOfWeek);
        <span class="hljs-keyword">return</span> {
            week: <span class="hljs-built_in">Math</span>.ceil(adjustedMoment.dayOfYear() / <span class="hljs-number">7</span>),
            year: adjustedMoment.year()
        };
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-79">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-79">&#182;</a>
              </div>
              <p><a href="http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday">http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dayOfYearFromWeeks</span>(<span class="hljs-params">year, week, weekday, firstDayOfWeekOfYear, firstDayOfWeek</span>) </span>{
        <span class="hljs-keyword">var</span> d = makeUTCDate(year, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>).getUTCDay(),
            daysToAdd, dayOfYear;

        weekday = weekday != <span class="hljs-literal">null</span> ? weekday : firstDayOfWeek;
        daysToAdd = firstDayOfWeek - d + (d &gt; firstDayOfWeekOfYear ? <span class="hljs-number">7</span> : <span class="hljs-number">0</span>) - (d &lt; firstDayOfWeek ? <span class="hljs-number">7</span> : <span class="hljs-number">0</span>);
        dayOfYear = <span class="hljs-number">7</span> * (week - <span class="hljs-number">1</span>) + (weekday - firstDayOfWeek) + daysToAdd + <span class="hljs-number">1</span>;

        <span class="hljs-keyword">return</span> {
            year: dayOfYear &gt; <span class="hljs-number">0</span> ? year : year - <span class="hljs-number">1</span>,
            dayOfYear: dayOfYear &gt; <span class="hljs-number">0</span> ? dayOfYear : daysInYear(year - <span class="hljs-number">1</span>) + dayOfYear
        };
    }

    <span class="hljs-comment">/************************************
        Top Level Functions
    ************************************/</span>

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeMoment</span>(<span class="hljs-params">config</span>) </span>{
        <span class="hljs-keyword">var</span> input = config._i,
            format = config._f;

        <span class="hljs-keyword">if</span> (input === <span class="hljs-literal">null</span> || (format === <span class="hljs-literal">undefined</span> &amp;&amp; input === <span class="hljs-string">''</span>)) {
            <span class="hljs-keyword">return</span> moment.invalid({
                nullInput: <span class="hljs-literal">true</span>
            });
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">'string'</span>) {
            config._i = input = getLangDefinition().preparse(input);
        }

        <span class="hljs-keyword">if</span> (moment.isMoment(input)) {
            config = cloneMoment(input);

            config._d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(+input._d);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (format) {
            <span class="hljs-keyword">if</span> (isArray(format)) {
                makeDateFromStringAndArray(config);
            } <span class="hljs-keyword">else</span> {
                makeDateFromStringAndFormat(config);
            }
        } <span class="hljs-keyword">else</span> {
            makeDateFromInput(config);
        }

        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Moment(config);
    }

    moment = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, format, lang, strict</span>) </span>{
        <span class="hljs-keyword">var</span> c;

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> (lang) === <span class="hljs-string">"boolean"</span>) {
            strict = lang;
            lang = <span class="hljs-literal">undefined</span>;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-80">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-80">&#182;</a>
              </div>
              <p>object construction must be done this way.
<a href="https://github.com/moment/moment/issues/1423">https://github.com/moment/moment/issues/1423</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        c = {};
        c._isAMomentObject = <span class="hljs-literal">true</span>;
        c._i = input;
        c._f = format;
        c._l = lang;
        c._strict = strict;
        c._isUTC = <span class="hljs-literal">false</span>;
        c._pf = defaultParsingFlags();

        <span class="hljs-keyword">return</span> makeMoment(c);
    };

    moment.suppressDeprecationWarnings = <span class="hljs-literal">false</span>;

    moment.createFromInputFallback = deprecate(
        <span class="hljs-string">"moment construction falls back to js Date. This is "</span> +
        <span class="hljs-string">"discouraged and will be removed in upcoming major "</span> +
        <span class="hljs-string">"release. Please refer to "</span> +
        <span class="hljs-string">"https://github.com/moment/moment/issues/1407 for more info."</span>,
        <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">config</span>) </span>{
            config._d = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(config._i);
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-81">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-81">&#182;</a>
              </div>
              <p>creating with utc</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    moment.utc = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, format, lang, strict</span>) </span>{
        <span class="hljs-keyword">var</span> c;

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> (lang) === <span class="hljs-string">"boolean"</span>) {
            strict = lang;
            lang = <span class="hljs-literal">undefined</span>;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-82">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-82">&#182;</a>
              </div>
              <p>object construction must be done this way.
<a href="https://github.com/moment/moment/issues/1423">https://github.com/moment/moment/issues/1423</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        c = {};
        c._isAMomentObject = <span class="hljs-literal">true</span>;
        c._useUTC = <span class="hljs-literal">true</span>;
        c._isUTC = <span class="hljs-literal">true</span>;
        c._l = lang;
        c._i = input;
        c._f = format;
        c._strict = strict;
        c._pf = defaultParsingFlags();

        <span class="hljs-keyword">return</span> makeMoment(c).utc();
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-83">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-83">&#182;</a>
              </div>
              <p>creating with unix timestamp (in seconds)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    moment.unix = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
        <span class="hljs-keyword">return</span> moment(input * <span class="hljs-number">1000</span>);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-84">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-84">&#182;</a>
              </div>
              <p>duration</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    moment.duration = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, key</span>) </span>{
        <span class="hljs-keyword">var</span> duration = input,</pre></div></div>
            
        </li>
        
        
        <li id="section-85">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-85">&#182;</a>
              </div>
              <p>matching against regexp is expensive, do it on demand</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            match = <span class="hljs-literal">null</span>,
            sign,
            ret,
            parseIso;

        <span class="hljs-keyword">if</span> (moment.isDuration(input)) {
            duration = {
                ms: input._milliseconds,
                d: input._days,
                M: input._months
            };
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">'number'</span>) {
            duration = {};
            <span class="hljs-keyword">if</span> (key) {
                duration[key] = input;
            } <span class="hljs-keyword">else</span> {
                duration.milliseconds = input;
            }
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( !! (match = aspNetTimeSpanJsonRegex.exec(input))) {
            sign = (match[<span class="hljs-number">1</span>] === <span class="hljs-string">"-"</span>) ? -<span class="hljs-number">1</span> : <span class="hljs-number">1</span>;
            duration = {
                y: <span class="hljs-number">0</span>,
                d: toInt(match[DATE]) * sign,
                h: toInt(match[HOUR]) * sign,
                m: toInt(match[MINUTE]) * sign,
                s: toInt(match[SECOND]) * sign,
                ms: toInt(match[MILLISECOND]) * sign
            };
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( !! (match = isoDurationRegex.exec(input))) {
            sign = (match[<span class="hljs-number">1</span>] === <span class="hljs-string">"-"</span>) ? -<span class="hljs-number">1</span> : <span class="hljs-number">1</span>;
            parseIso = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">inp</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-86">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-86">&#182;</a>
              </div>
              <p>We’d normally use ~~inp for this, but unfortunately it also
converts floats to ints.
inp may be undefined, so careful calling replace on it.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">var</span> res = inp &amp;&amp; <span class="hljs-built_in">parseFloat</span>(inp.replace(<span class="hljs-string">','</span>, <span class="hljs-string">'.'</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-87">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-87">&#182;</a>
              </div>
              <p>apply sign while we’re at it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">return</span> (<span class="hljs-built_in">isNaN</span>(res) ? <span class="hljs-number">0</span> : res) * sign;
            };
            duration = {
                y: parseIso(match[<span class="hljs-number">2</span>]),
                M: parseIso(match[<span class="hljs-number">3</span>]),
                d: parseIso(match[<span class="hljs-number">4</span>]),
                h: parseIso(match[<span class="hljs-number">5</span>]),
                m: parseIso(match[<span class="hljs-number">6</span>]),
                s: parseIso(match[<span class="hljs-number">7</span>]),
                w: parseIso(match[<span class="hljs-number">8</span>])
            };
        }

        ret = <span class="hljs-keyword">new</span> Duration(duration);

        <span class="hljs-keyword">if</span> (moment.isDuration(input) &amp;&amp; input.hasOwnProperty(<span class="hljs-string">'_lang'</span>)) {
            ret._lang = input._lang;
        }

        <span class="hljs-keyword">return</span> ret;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-88">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-88">&#182;</a>
              </div>
              <p>version number</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    moment.version = VERSION;</pre></div></div>
            
        </li>
        
        
        <li id="section-89">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-89">&#182;</a>
              </div>
              <p>default format</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    moment.defaultFormat = isoFormat;</pre></div></div>
            
        </li>
        
        
        <li id="section-90">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-90">&#182;</a>
              </div>
              <p>Plugins that add properties should also add the key here (null value),
so we can properly clone ourselves.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    moment.momentProperties = momentProperties;</pre></div></div>
            
        </li>
        
        
        <li id="section-91">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-91">&#182;</a>
              </div>
              <p>This function will be called whenever a moment is mutated.
It is intended to keep the offset in sync with the timezone.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    moment.updateOffset = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{};</pre></div></div>
            
        </li>
        
        
        <li id="section-92">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-92">&#182;</a>
              </div>
              <p>This function will load languages and then set the global language.  If
no arguments are passed in, it will simply return the current global
language key.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    moment.lang = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key, values</span>) </span>{
        <span class="hljs-keyword">var</span> r;
        <span class="hljs-keyword">if</span> (!key) {
            <span class="hljs-keyword">return</span> moment.fn._lang._abbr;
        }
        <span class="hljs-keyword">if</span> (values) {
            loadLang(normalizeLanguage(key), values);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (values === <span class="hljs-literal">null</span>) {
            unloadLang(key);
            key = <span class="hljs-string">'en'</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!languages[key]) {
            getLangDefinition(key);
        }
        r = moment.duration.fn._lang = moment.fn._lang = getLangDefinition(key);
        <span class="hljs-keyword">return</span> r._abbr;
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-93">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-93">&#182;</a>
              </div>
              <p>returns language data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    moment.langData = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
        <span class="hljs-keyword">if</span> (key &amp;&amp; key._lang &amp;&amp; key._lang._abbr) {
            key = key._lang._abbr;
        }
        <span class="hljs-keyword">return</span> getLangDefinition(key);
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-94">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-94">&#182;</a>
              </div>
              <p>compare moment object</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    moment.isMoment = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">return</span> obj <span class="hljs-keyword">instanceof</span> Moment ||
            (obj != <span class="hljs-literal">null</span> &amp;&amp; obj.hasOwnProperty(<span class="hljs-string">'_isAMomentObject'</span>));
    };</pre></div></div>
            
        </li>
        
        
        <li id="section-95">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-95">&#182;</a>
              </div>
              <p>for typechecking Duration objects</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    moment.isDuration = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) </span>{
        <span class="hljs-keyword">return</span> obj <span class="hljs-keyword">instanceof</span> Duration;
    };

    <span class="hljs-keyword">for</span> (i = lists.length - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; --i) {
        makeList(lists[i]);
    }

    moment.normalizeUnits = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">units</span>) </span>{
        <span class="hljs-keyword">return</span> normalizeUnits(units);
    };

    moment.invalid = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">flags</span>) </span>{
        <span class="hljs-keyword">var</span> m = moment.utc(<span class="hljs-literal">NaN</span>);
        <span class="hljs-keyword">if</span> (flags != <span class="hljs-literal">null</span>) {
            extend(m._pf, flags);
        } <span class="hljs-keyword">else</span> {
            m._pf.userInvalidated = <span class="hljs-literal">true</span>;
        }

        <span class="hljs-keyword">return</span> m;
    };

    moment.parseZone = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> moment.apply(<span class="hljs-literal">null</span>, <span class="hljs-built_in">arguments</span>).parseZone();
    };

    moment.parseTwoDigitYear = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
        <span class="hljs-keyword">return</span> toInt(input) + (toInt(input) &gt; <span class="hljs-number">68</span> ? <span class="hljs-number">1900</span> : <span class="hljs-number">2000</span>);
    };

    <span class="hljs-comment">/************************************
        Moment Prototype
    ************************************/</span>


    extend(moment.fn = Moment.prototype, {

        clone: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> moment(<span class="hljs-keyword">this</span>);
        },

        valueOf: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> +<span class="hljs-keyword">this</span>._d + ((<span class="hljs-keyword">this</span>._offset || <span class="hljs-number">0</span>) * <span class="hljs-number">60000</span>);
        },

        unix: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(+<span class="hljs-keyword">this</span> / <span class="hljs-number">1000</span>);
        },

        toString: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.clone().lang(<span class="hljs-string">'en'</span>).format(<span class="hljs-string">"ddd MMM DD YYYY HH:mm:ss [GMT]ZZ"</span>);
        },

        toDate: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._offset ? <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(+<span class="hljs-keyword">this</span>) : <span class="hljs-keyword">this</span>._d;
        },

        toISOString: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> m = moment(<span class="hljs-keyword">this</span>).utc();
            <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> &lt; m.year() &amp;&amp; m.year() &lt;= <span class="hljs-number">9999</span>) {
                <span class="hljs-keyword">return</span> formatMoment(m, <span class="hljs-string">'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]'</span>);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> formatMoment(m, <span class="hljs-string">'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]'</span>);
            }
        },

        toArray: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> m = <span class="hljs-keyword">this</span>;
            <span class="hljs-keyword">return</span> [
                m.year(),
                m.month(),
                m.date(),
                m.hours(),
                m.minutes(),
                m.seconds(),
                m.milliseconds()
            ];
        },

        isValid: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> isValid(<span class="hljs-keyword">this</span>);
        },

        isDSTShifted: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._a) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.isValid() &amp;&amp; compareArrays(<span class="hljs-keyword">this</span>._a, (<span class="hljs-keyword">this</span>._isUTC ? moment.utc(<span class="hljs-keyword">this</span>._a) : moment(<span class="hljs-keyword">this</span>._a)).toArray()) &gt; <span class="hljs-number">0</span>;
            }

            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        },

        parsingFlags: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> extend({}, <span class="hljs-keyword">this</span>._pf);
        },

        invalidAt: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._pf.overflow;
        },

        utc: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.zone(<span class="hljs-number">0</span>);
        },

        local: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">this</span>.zone(<span class="hljs-number">0</span>);
            <span class="hljs-keyword">this</span>._isUTC = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },

        format: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">inputString</span>) </span>{
            <span class="hljs-keyword">var</span> output = formatMoment(<span class="hljs-keyword">this</span>, inputString || moment.defaultFormat);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.lang().postformat(output);
        },

        add: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, val</span>) </span>{
            <span class="hljs-keyword">var</span> dur;</pre></div></div>
            
        </li>
        
        
        <li id="section-96">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-96">&#182;</a>
              </div>
              <p>switch args to support add(‘s’, 1) and add(1, ‘s’)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">'string'</span>) {
                dur = moment.duration(+val, input);
            } <span class="hljs-keyword">else</span> {
                dur = moment.duration(input, val);
            }
            addOrSubtractDurationFromMoment(<span class="hljs-keyword">this</span>, dur, <span class="hljs-number">1</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },

        subtract: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, val</span>) </span>{
            <span class="hljs-keyword">var</span> dur;</pre></div></div>
            
        </li>
        
        
        <li id="section-97">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-97">&#182;</a>
              </div>
              <p>switch args to support subtract(‘s’, 1) and subtract(1, ‘s’)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">'string'</span>) {
                dur = moment.duration(+val, input);
            } <span class="hljs-keyword">else</span> {
                dur = moment.duration(input, val);
            }
            addOrSubtractDurationFromMoment(<span class="hljs-keyword">this</span>, dur, -<span class="hljs-number">1</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },

        diff: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, units, asFloat</span>) </span>{
            <span class="hljs-keyword">var</span> that = makeAs(input, <span class="hljs-keyword">this</span>),
                zoneDiff = (<span class="hljs-keyword">this</span>.zone() - that.zone()) * <span class="hljs-number">6e4</span>,
                diff, output;

            units = normalizeUnits(units);

            <span class="hljs-keyword">if</span> (units === <span class="hljs-string">'year'</span> || units === <span class="hljs-string">'month'</span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-98">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-98">&#182;</a>
              </div>
              <p>average number of days in the months in the given dates</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                diff = (<span class="hljs-keyword">this</span>.daysInMonth() + that.daysInMonth()) * <span class="hljs-number">432e5</span>; <span class="hljs-comment">// 24 * 60 * 60 * 1000 / 2</span></pre></div></div>
            
        </li>
        
        
        <li id="section-99">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-99">&#182;</a>
              </div>
              <p>difference in months</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                output = ((<span class="hljs-keyword">this</span>.year() - that.year()) * <span class="hljs-number">12</span>) + (<span class="hljs-keyword">this</span>.month() - that.month());</pre></div></div>
            
        </li>
        
        
        <li id="section-100">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-100">&#182;</a>
              </div>
              <p>adjust by taking difference in days, average number of days
and dst in the given months.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                output += ((<span class="hljs-keyword">this</span> - moment(<span class="hljs-keyword">this</span>).startOf(<span class="hljs-string">'month'</span>)) -
                    (that - moment(that).startOf(<span class="hljs-string">'month'</span>))) / diff;</pre></div></div>
            
        </li>
        
        
        <li id="section-101">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-101">&#182;</a>
              </div>
              <p>same as above but with zones, to negate all dst</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                output -= ((<span class="hljs-keyword">this</span>.zone() - moment(<span class="hljs-keyword">this</span>).startOf(<span class="hljs-string">'month'</span>).zone()) -
                    (that.zone() - moment(that).startOf(<span class="hljs-string">'month'</span>).zone())) * <span class="hljs-number">6e4</span> / diff;
                <span class="hljs-keyword">if</span> (units === <span class="hljs-string">'year'</span>) {
                    output = output / <span class="hljs-number">12</span>;
                }
            } <span class="hljs-keyword">else</span> {
                diff = (<span class="hljs-keyword">this</span> - that);
                output = units === <span class="hljs-string">'second'</span> ? diff / <span class="hljs-number">1e3</span> : <span class="hljs-comment">// 1000</span>
                units === <span class="hljs-string">'minute'</span> ? diff / <span class="hljs-number">6e4</span> : <span class="hljs-comment">// 1000 * 60</span>
                units === <span class="hljs-string">'hour'</span> ? diff / <span class="hljs-number">36e5</span> : <span class="hljs-comment">// 1000 * 60 * 60</span>
                units === <span class="hljs-string">'day'</span> ? (diff - zoneDiff) / <span class="hljs-number">864e5</span> : <span class="hljs-comment">// 1000 * 60 * 60 * 24, negate dst</span>
                units === <span class="hljs-string">'week'</span> ? (diff - zoneDiff) / <span class="hljs-number">6048e5</span> : <span class="hljs-comment">// 1000 * 60 * 60 * 24 * 7, negate dst</span>
                diff;
            }
            <span class="hljs-keyword">return</span> asFloat ? output : absRound(output);
        },

        from: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">time, withoutSuffix</span>) </span>{
            <span class="hljs-keyword">return</span> moment.duration(<span class="hljs-keyword">this</span>.diff(time)).lang(<span class="hljs-keyword">this</span>.lang()._abbr).humanize(!withoutSuffix);
        },

        fromNow: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">withoutSuffix</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.from(moment(), withoutSuffix);
        },

        calendar: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-102">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-102">&#182;</a>
              </div>
              <p>We want to compare the start of today, vs this.
Getting start-of-today depends on whether we’re zone’d or not.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> sod = makeAs(moment(), <span class="hljs-keyword">this</span>).startOf(<span class="hljs-string">'day'</span>),
                diff = <span class="hljs-keyword">this</span>.diff(sod, <span class="hljs-string">'days'</span>, <span class="hljs-literal">true</span>),
                format = diff &lt; -<span class="hljs-number">6</span> ? <span class="hljs-string">'sameElse'</span> :
                    diff &lt; -<span class="hljs-number">1</span> ? <span class="hljs-string">'lastWeek'</span> :
                    diff &lt; <span class="hljs-number">0</span> ? <span class="hljs-string">'lastDay'</span> :
                    diff &lt; <span class="hljs-number">1</span> ? <span class="hljs-string">'sameDay'</span> :
                    diff &lt; <span class="hljs-number">2</span> ? <span class="hljs-string">'nextDay'</span> :
                    diff &lt; <span class="hljs-number">7</span> ? <span class="hljs-string">'nextWeek'</span> : <span class="hljs-string">'sameElse'</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.format(<span class="hljs-keyword">this</span>.lang().calendar(format, <span class="hljs-keyword">this</span>));
        },

        isLeapYear: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> isLeapYear(<span class="hljs-keyword">this</span>.year());
        },

        isDST: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.zone() &lt; <span class="hljs-keyword">this</span>.clone().month(<span class="hljs-number">0</span>).zone() ||
                <span class="hljs-keyword">this</span>.zone() &lt; <span class="hljs-keyword">this</span>.clone().month(<span class="hljs-number">5</span>).zone());
        },

        day: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">var</span> day = <span class="hljs-keyword">this</span>._isUTC ? <span class="hljs-keyword">this</span>._d.getUTCDay() : <span class="hljs-keyword">this</span>._d.getDay();
            <span class="hljs-keyword">if</span> (input != <span class="hljs-literal">null</span>) {
                input = parseWeekday(input, <span class="hljs-keyword">this</span>.lang());
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.add({
                    d: input - day
                });
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> day;
            }
        },

        month: makeAccessor(<span class="hljs-string">'Month'</span>, <span class="hljs-literal">true</span>),

        startOf: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">units</span>) </span>{
            units = normalizeUnits(units);</pre></div></div>
            
        </li>
        
        
        <li id="section-103">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-103">&#182;</a>
              </div>
              <p>the following switch intentionally omits break keywords
to utilize falling through the cases.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">switch</span> (units) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">'year'</span>:
                <span class="hljs-keyword">this</span>.month(<span class="hljs-number">0</span>);
                <span class="hljs-comment">/* falls through */</span>
            <span class="hljs-keyword">case</span> <span class="hljs-string">'quarter'</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">'month'</span>:
                <span class="hljs-keyword">this</span>.date(<span class="hljs-number">1</span>);
                <span class="hljs-comment">/* falls through */</span>
            <span class="hljs-keyword">case</span> <span class="hljs-string">'week'</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">'isoWeek'</span>:
            <span class="hljs-keyword">case</span> <span class="hljs-string">'day'</span>:
                <span class="hljs-keyword">this</span>.hours(<span class="hljs-number">0</span>);
                <span class="hljs-comment">/* falls through */</span>
            <span class="hljs-keyword">case</span> <span class="hljs-string">'hour'</span>:
                <span class="hljs-keyword">this</span>.minutes(<span class="hljs-number">0</span>);
                <span class="hljs-comment">/* falls through */</span>
            <span class="hljs-keyword">case</span> <span class="hljs-string">'minute'</span>:
                <span class="hljs-keyword">this</span>.seconds(<span class="hljs-number">0</span>);
                <span class="hljs-comment">/* falls through */</span>
            <span class="hljs-keyword">case</span> <span class="hljs-string">'second'</span>:
                <span class="hljs-keyword">this</span>.milliseconds(<span class="hljs-number">0</span>);
                <span class="hljs-comment">/* falls through */</span>
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-104">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-104">&#182;</a>
              </div>
              <p>weeks are a special case</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (units === <span class="hljs-string">'week'</span>) {
                <span class="hljs-keyword">this</span>.weekday(<span class="hljs-number">0</span>);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (units === <span class="hljs-string">'isoWeek'</span>) {
                <span class="hljs-keyword">this</span>.isoWeekday(<span class="hljs-number">1</span>);
            }</pre></div></div>
            
        </li>
        
        
        <li id="section-105">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-105">&#182;</a>
              </div>
              <p>quarters are also special</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (units === <span class="hljs-string">'quarter'</span>) {
                <span class="hljs-keyword">this</span>.month(<span class="hljs-built_in">Math</span>.floor(<span class="hljs-keyword">this</span>.month() / <span class="hljs-number">3</span>) * <span class="hljs-number">3</span>);
            }

            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },

        endOf: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">units</span>) </span>{
            units = normalizeUnits(units);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.startOf(units).add((units === <span class="hljs-string">'isoWeek'</span> ? <span class="hljs-string">'week'</span> : units), <span class="hljs-number">1</span>).subtract(<span class="hljs-string">'ms'</span>, <span class="hljs-number">1</span>);
        },

        isAfter: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, units</span>) </span>{
            units = <span class="hljs-keyword">typeof</span> units !== <span class="hljs-string">'undefined'</span> ? units : <span class="hljs-string">'millisecond'</span>;
            <span class="hljs-keyword">return</span> +<span class="hljs-keyword">this</span>.clone().startOf(units) &gt; +moment(input).startOf(units);
        },

        isBefore: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, units</span>) </span>{
            units = <span class="hljs-keyword">typeof</span> units !== <span class="hljs-string">'undefined'</span> ? units : <span class="hljs-string">'millisecond'</span>;
            <span class="hljs-keyword">return</span> +<span class="hljs-keyword">this</span>.clone().startOf(units) &lt; +moment(input).startOf(units);
        },

        isSame: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, units</span>) </span>{
            units = units || <span class="hljs-string">'ms'</span>;
            <span class="hljs-keyword">return</span> +<span class="hljs-keyword">this</span>.clone().startOf(units) === +makeAs(input, <span class="hljs-keyword">this</span>).startOf(units);
        },

        min: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">other</span>) </span>{
            other = moment.apply(<span class="hljs-literal">null</span>, <span class="hljs-built_in">arguments</span>);
            <span class="hljs-keyword">return</span> other &lt; <span class="hljs-keyword">this</span> ? <span class="hljs-keyword">this</span> : other;
        },

        max: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">other</span>) </span>{
            other = moment.apply(<span class="hljs-literal">null</span>, <span class="hljs-built_in">arguments</span>);
            <span class="hljs-keyword">return</span> other &gt; <span class="hljs-keyword">this</span> ? <span class="hljs-keyword">this</span> : other;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-106">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-106">&#182;</a>
              </div>
              <p>keepTime = true means only change the timezone, without affecting
the local hour. So 5:31:26 +0300 –[zone(2, true)]–&gt; 5:31:26 +0200
It is possible that 5:31:26 doesn’t exist int zone +0200, so we
adjust the time as needed, to be valid.</p>
<p>Keeping the time actually adds/subtracts (one hour)
from the actual represented time. That is why we call updateOffset
a second time. In case it wants us to change the offset again
_changeInProgress == true case, then we have to adjust, because
there is no such time in the given timezone.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        zone: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, keepTime</span>) </span>{
            <span class="hljs-keyword">var</span> offset = <span class="hljs-keyword">this</span>._offset || <span class="hljs-number">0</span>;
            <span class="hljs-keyword">if</span> (input != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">"string"</span>) {
                    input = timezoneMinutesFromString(input);
                }
                <span class="hljs-keyword">if</span> (<span class="hljs-built_in">Math</span>.abs(input) &lt; <span class="hljs-number">16</span>) {
                    input = input * <span class="hljs-number">60</span>;
                }
                <span class="hljs-keyword">this</span>._offset = input;
                <span class="hljs-keyword">this</span>._isUTC = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">if</span> (offset !== input) {
                    <span class="hljs-keyword">if</span> (!keepTime || <span class="hljs-keyword">this</span>._changeInProgress) {
                        addOrSubtractDurationFromMoment(<span class="hljs-keyword">this</span>,
                            moment.duration(offset - input, <span class="hljs-string">'m'</span>), <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>);
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>._changeInProgress) {
                        <span class="hljs-keyword">this</span>._changeInProgress = <span class="hljs-literal">true</span>;
                        moment.updateOffset(<span class="hljs-keyword">this</span>, <span class="hljs-literal">true</span>);
                        <span class="hljs-keyword">this</span>._changeInProgress = <span class="hljs-literal">null</span>;
                    }
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._isUTC ? offset : <span class="hljs-keyword">this</span>._d.getTimezoneOffset();
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },

        zoneAbbr: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._isUTC ? <span class="hljs-string">"UTC"</span> : <span class="hljs-string">""</span>;
        },

        zoneName: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._isUTC ? <span class="hljs-string">"Coordinated Universal Time"</span> : <span class="hljs-string">""</span>;
        },

        parseZone: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._tzm) {
                <span class="hljs-keyword">this</span>.zone(<span class="hljs-keyword">this</span>._tzm);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>._i === <span class="hljs-string">'string'</span>) {
                <span class="hljs-keyword">this</span>.zone(<span class="hljs-keyword">this</span>._i);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },

        hasAlignedHourOffset: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">if</span> (!input) {
                input = <span class="hljs-number">0</span>;
            } <span class="hljs-keyword">else</span> {
                input = moment(input).zone();
            }

            <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.zone() - input) % <span class="hljs-number">60</span> === <span class="hljs-number">0</span>;
        },

        daysInMonth: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> daysInMonth(<span class="hljs-keyword">this</span>.year(), <span class="hljs-keyword">this</span>.month());
        },

        dayOfYear: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">var</span> dayOfYear = round((moment(<span class="hljs-keyword">this</span>).startOf(<span class="hljs-string">'day'</span>) - moment(<span class="hljs-keyword">this</span>).startOf(<span class="hljs-string">'year'</span>)) / <span class="hljs-number">864e5</span>) + <span class="hljs-number">1</span>;
            <span class="hljs-keyword">return</span> input == <span class="hljs-literal">null</span> ? dayOfYear : <span class="hljs-keyword">this</span>.add(<span class="hljs-string">"d"</span>, (input - dayOfYear));
        },

        quarter: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">return</span> input == <span class="hljs-literal">null</span> ? <span class="hljs-built_in">Math</span>.ceil((<span class="hljs-keyword">this</span>.month() + <span class="hljs-number">1</span>) / <span class="hljs-number">3</span>) : <span class="hljs-keyword">this</span>.month((input - <span class="hljs-number">1</span>) * <span class="hljs-number">3</span> + <span class="hljs-keyword">this</span>.month() % <span class="hljs-number">3</span>);
        },

        weekYear: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">var</span> year = weekOfYear(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.lang()._week.dow, <span class="hljs-keyword">this</span>.lang()._week.doy).year;
            <span class="hljs-keyword">return</span> input == <span class="hljs-literal">null</span> ? year : <span class="hljs-keyword">this</span>.add(<span class="hljs-string">"y"</span>, (input - year));
        },

        isoWeekYear: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">var</span> year = weekOfYear(<span class="hljs-keyword">this</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>).year;
            <span class="hljs-keyword">return</span> input == <span class="hljs-literal">null</span> ? year : <span class="hljs-keyword">this</span>.add(<span class="hljs-string">"y"</span>, (input - year));
        },

        week: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">var</span> week = <span class="hljs-keyword">this</span>.lang().week(<span class="hljs-keyword">this</span>);
            <span class="hljs-keyword">return</span> input == <span class="hljs-literal">null</span> ? week : <span class="hljs-keyword">this</span>.add(<span class="hljs-string">"d"</span>, (input - week) * <span class="hljs-number">7</span>);
        },

        isoWeek: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">var</span> week = weekOfYear(<span class="hljs-keyword">this</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>).week;
            <span class="hljs-keyword">return</span> input == <span class="hljs-literal">null</span> ? week : <span class="hljs-keyword">this</span>.add(<span class="hljs-string">"d"</span>, (input - week) * <span class="hljs-number">7</span>);
        },

        weekday: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{
            <span class="hljs-keyword">var</span> weekday = (<span class="hljs-keyword">this</span>.day() + <span class="hljs-number">7</span> - <span class="hljs-keyword">this</span>.lang()._week.dow) % <span class="hljs-number">7</span>;
            <span class="hljs-keyword">return</span> input == <span class="hljs-literal">null</span> ? weekday : <span class="hljs-keyword">this</span>.add(<span class="hljs-string">"d"</span>, input - weekday);
        },

        isoWeekday: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-107">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-107">&#182;</a>
              </div>
              <p>behaves the same as moment#day except
as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)
as a setter, sunday should belong to the previous week.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">return</span> input == <span class="hljs-literal">null</span> ? <span class="hljs-keyword">this</span>.day() || <span class="hljs-number">7</span> : <span class="hljs-keyword">this</span>.day(<span class="hljs-keyword">this</span>.day() % <span class="hljs-number">7</span> ? input : input - <span class="hljs-number">7</span>);
        },

        isoWeeksInYear: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> weeksInYear(<span class="hljs-keyword">this</span>.year(), <span class="hljs-number">1</span>, <span class="hljs-number">4</span>);
        },

        weeksInYear: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> weekInfo = <span class="hljs-keyword">this</span>._lang._week;
            <span class="hljs-keyword">return</span> weeksInYear(<span class="hljs-keyword">this</span>.year(), weekInfo.dow, weekInfo.doy);
        },

        get: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">units</span>) </span>{
            units = normalizeUnits(units);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[units]();
        },

        set: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">units, value</span>) </span>{
            units = normalizeUnits(units);
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>[units] === <span class="hljs-string">'function'</span>) {
                <span class="hljs-keyword">this</span>[units](value);
            }
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },</pre></div></div>
            
        </li>
        
        
        <li id="section-108">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-108">&#182;</a>
              </div>
              <p>If passed a language key, it will set the language for this
instance.  Otherwise, it will return the language configuration
variables for this instance.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        lang: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">key</span>) </span>{
            <span class="hljs-keyword">if</span> (key === <span class="hljs-literal">undefined</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._lang;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">this</span>._lang = getLangDefinition(key);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            }
        }
    });

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rawMonthSetter</span>(<span class="hljs-params">mom, value</span>) </span>{
        <span class="hljs-keyword">var</span> dayOfMonth;</pre></div></div>
            
        </li>
        
        
        <li id="section-109">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-109">&#182;</a>
              </div>
              <p>TODO: Move this out of here!</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'string'</span>) {
            value = mom.lang().monthsParse(value);</pre></div></div>
            
        </li>
        
        
        <li id="section-110">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-110">&#182;</a>
              </div>
              <p>TODO: Another silent failure?</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">'number'</span>) {
                <span class="hljs-keyword">return</span> mom;
            }
        }

        dayOfMonth = <span class="hljs-built_in">Math</span>.min(mom.date(),
            daysInMonth(mom.year(), value));
        mom._d[<span class="hljs-string">'set'</span> + (mom._isUTC ? <span class="hljs-string">'UTC'</span> : <span class="hljs-string">''</span>) + <span class="hljs-string">'Month'</span>](value, dayOfMonth);
        <span class="hljs-keyword">return</span> mom;
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rawGetter</span>(<span class="hljs-params">mom, unit</span>) </span>{
        <span class="hljs-keyword">return</span> mom._d[<span class="hljs-string">'get'</span> + (mom._isUTC ? <span class="hljs-string">'UTC'</span> : <span class="hljs-string">''</span>) + unit]();
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rawSetter</span>(<span class="hljs-params">mom, unit, value</span>) </span>{
        <span class="hljs-keyword">if</span> (unit === <span class="hljs-string">'Month'</span>) {
            <span class="hljs-keyword">return</span> rawMonthSetter(mom, value);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> mom._d[<span class="hljs-string">'set'</span> + (mom._isUTC ? <span class="hljs-string">'UTC'</span> : <span class="hljs-string">''</span>) + unit](value);
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeAccessor</span>(<span class="hljs-params">unit, keepTime</span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) </span>{
            <span class="hljs-keyword">if</span> (value != <span class="hljs-literal">null</span>) {
                rawSetter(<span class="hljs-keyword">this</span>, unit, value);
                moment.updateOffset(<span class="hljs-keyword">this</span>, keepTime);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> rawGetter(<span class="hljs-keyword">this</span>, unit);
            }
        };
    }

    moment.fn.millisecond = moment.fn.milliseconds = makeAccessor(<span class="hljs-string">'Milliseconds'</span>, <span class="hljs-literal">false</span>);
    moment.fn.second = moment.fn.seconds = makeAccessor(<span class="hljs-string">'Seconds'</span>, <span class="hljs-literal">false</span>);
    moment.fn.minute = moment.fn.minutes = makeAccessor(<span class="hljs-string">'Minutes'</span>, <span class="hljs-literal">false</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-111">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-111">&#182;</a>
              </div>
              <p>Setting the hour should keep the time, because the user explicitly
specified which hour he wants. So trying to maintain the same hour (in
a new timezone) makes sense. Adding/subtracting hours does not follow
this rule.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    moment.fn.hour = moment.fn.hours = makeAccessor(<span class="hljs-string">'Hours'</span>, <span class="hljs-literal">true</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-112">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-112">&#182;</a>
              </div>
              <p>moment.fn.month is defined separately</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    moment.fn.date = makeAccessor(<span class="hljs-string">'Date'</span>, <span class="hljs-literal">true</span>);
    moment.fn.dates = deprecate(<span class="hljs-string">"dates accessor is deprecated. Use date instead."</span>, makeAccessor(<span class="hljs-string">'Date'</span>, <span class="hljs-literal">true</span>));
    moment.fn.year = makeAccessor(<span class="hljs-string">'FullYear'</span>, <span class="hljs-literal">true</span>);
    moment.fn.years = deprecate(<span class="hljs-string">"years accessor is deprecated. Use year instead."</span>, makeAccessor(<span class="hljs-string">'FullYear'</span>, <span class="hljs-literal">true</span>));</pre></div></div>
            
        </li>
        
        
        <li id="section-113">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-113">&#182;</a>
              </div>
              <p>add plural methods</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    moment.fn.days = moment.fn.day;
    moment.fn.months = moment.fn.month;
    moment.fn.weeks = moment.fn.week;
    moment.fn.isoWeeks = moment.fn.isoWeek;
    moment.fn.quarters = moment.fn.quarter;</pre></div></div>
            
        </li>
        
        
        <li id="section-114">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-114">&#182;</a>
              </div>
              <p>add aliased format methods</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    moment.fn.toJSON = moment.fn.toISOString;

    <span class="hljs-comment">/************************************
        Duration Prototype
    ************************************/</span>


    extend(moment.duration.fn = Duration.prototype, {

        _bubble: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> milliseconds = <span class="hljs-keyword">this</span>._milliseconds,
                days = <span class="hljs-keyword">this</span>._days,
                months = <span class="hljs-keyword">this</span>._months,
                data = <span class="hljs-keyword">this</span>._data,
                seconds, minutes, hours, years;</pre></div></div>
            
        </li>
        
        
        <li id="section-115">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-115">&#182;</a>
              </div>
              <p>The following code bubbles up values, see the tests for
examples of what that means.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            data.milliseconds = milliseconds % <span class="hljs-number">1000</span>;

            seconds = absRound(milliseconds / <span class="hljs-number">1000</span>);
            data.seconds = seconds % <span class="hljs-number">60</span>;

            minutes = absRound(seconds / <span class="hljs-number">60</span>);
            data.minutes = minutes % <span class="hljs-number">60</span>;

            hours = absRound(minutes / <span class="hljs-number">60</span>);
            data.hours = hours % <span class="hljs-number">24</span>;

            days += absRound(hours / <span class="hljs-number">24</span>);
            data.days = days % <span class="hljs-number">30</span>;

            months += absRound(days / <span class="hljs-number">30</span>);
            data.months = months % <span class="hljs-number">12</span>;

            years = absRound(months / <span class="hljs-number">12</span>);
            data.years = years;
        },

        weeks: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> absRound(<span class="hljs-keyword">this</span>.days() / <span class="hljs-number">7</span>);
        },

        valueOf: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._milliseconds +
                <span class="hljs-keyword">this</span>._days * <span class="hljs-number">864e5</span> +
                (<span class="hljs-keyword">this</span>._months % <span class="hljs-number">12</span>) * <span class="hljs-number">2592e6</span> +
                toInt(<span class="hljs-keyword">this</span>._months / <span class="hljs-number">12</span>) * <span class="hljs-number">31536e6</span>;
        },

        humanize: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">withSuffix</span>) </span>{
            <span class="hljs-keyword">var</span> difference = +<span class="hljs-keyword">this</span>,
                output = relativeTime(difference, !withSuffix, <span class="hljs-keyword">this</span>.lang());

            <span class="hljs-keyword">if</span> (withSuffix) {
                output = <span class="hljs-keyword">this</span>.lang().pastFuture(difference, output);
            }

            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.lang().postformat(output);
        },

        add: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, val</span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-116">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-116">&#182;</a>
              </div>
              <p>supports only 2.0-style add(1, ‘s’) or add(moment)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> dur = moment.duration(input, val);

            <span class="hljs-keyword">this</span>._milliseconds += dur._milliseconds;
            <span class="hljs-keyword">this</span>._days += dur._days;
            <span class="hljs-keyword">this</span>._months += dur._months;

            <span class="hljs-keyword">this</span>._bubble();

            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },

        subtract: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">input, val</span>) </span>{
            <span class="hljs-keyword">var</span> dur = moment.duration(input, val);

            <span class="hljs-keyword">this</span>._milliseconds -= dur._milliseconds;
            <span class="hljs-keyword">this</span>._days -= dur._days;
            <span class="hljs-keyword">this</span>._months -= dur._months;

            <span class="hljs-keyword">this</span>._bubble();

            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>;
        },

        get: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">units</span>) </span>{
            units = normalizeUnits(units);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[units.toLowerCase() + <span class="hljs-string">'s'</span>]();
        },

        <span class="hljs-keyword">as</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">units</span>) </span>{
            units = normalizeUnits(units);
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>[<span class="hljs-string">'as'</span> + units.charAt(<span class="hljs-number">0</span>).toUpperCase() + units.slice(<span class="hljs-number">1</span>) + <span class="hljs-string">'s'</span>]();
        },

        lang: moment.fn.lang,

        toIsoString: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-117">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-117">&#182;</a>
              </div>
              <p>inspired by <a href="https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js">https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">var</span> years = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>.years()),
                months = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>.months()),
                days = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>.days()),
                hours = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>.hours()),
                minutes = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>.minutes()),
                seconds = <span class="hljs-built_in">Math</span>.abs(<span class="hljs-keyword">this</span>.seconds() + <span class="hljs-keyword">this</span>.milliseconds() / <span class="hljs-number">1000</span>);

            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.asSeconds()) {</pre></div></div>
            
        </li>
        
        
        <li id="section-118">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-118">&#182;</a>
              </div>
              <p>this is the same as C#’s (Noda) and python (isodate)…
but not other JS (goog.date)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-keyword">return</span> <span class="hljs-string">'P0D'</span>;
            }

            <span class="hljs-keyword">return</span> (<span class="hljs-keyword">this</span>.asSeconds() &lt; <span class="hljs-number">0</span> ? <span class="hljs-string">'-'</span> : <span class="hljs-string">''</span>) +
                <span class="hljs-string">'P'</span> +
                (years ? years + <span class="hljs-string">'Y'</span> : <span class="hljs-string">''</span>) +
                (months ? months + <span class="hljs-string">'M'</span> : <span class="hljs-string">''</span>) +
                (days ? days + <span class="hljs-string">'D'</span> : <span class="hljs-string">''</span>) +
                ((hours || minutes || seconds) ? <span class="hljs-string">'T'</span> : <span class="hljs-string">''</span>) +
                (hours ? hours + <span class="hljs-string">'H'</span> : <span class="hljs-string">''</span>) +
                (minutes ? minutes + <span class="hljs-string">'M'</span> : <span class="hljs-string">''</span>) +
                (seconds ? seconds + <span class="hljs-string">'S'</span> : <span class="hljs-string">''</span>);
        }
    });

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeDurationGetter</span>(<span class="hljs-params">name</span>) </span>{
        moment.duration.fn[name] = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._data[name];
        };
    }

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeDurationAsGetter</span>(<span class="hljs-params">name, factor</span>) </span>{
        moment.duration.fn[<span class="hljs-string">'as'</span> + name] = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> +<span class="hljs-keyword">this</span> / factor;
        };
    }

    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> unitMillisecondFactors) {
        <span class="hljs-keyword">if</span> (unitMillisecondFactors.hasOwnProperty(i)) {
            makeDurationAsGetter(i, unitMillisecondFactors[i]);
            makeDurationGetter(i.toLowerCase());
        }
    }

    makeDurationAsGetter(<span class="hljs-string">'Weeks'</span>, <span class="hljs-number">6048e5</span>);
    moment.duration.fn.asMonths = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> (+<span class="hljs-keyword">this</span> - <span class="hljs-keyword">this</span>.years() * <span class="hljs-number">31536e6</span>) / <span class="hljs-number">2592e6</span> + <span class="hljs-keyword">this</span>.years() * <span class="hljs-number">12</span>;
    };


    <span class="hljs-comment">/************************************
        Default Lang
    ************************************/</span></pre></div></div>
            
        </li>
        
        
        <li id="section-119">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-119">&#182;</a>
              </div>
              <p>Set default language, other languages will inherit from English.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    moment.lang(<span class="hljs-string">'en'</span>, {
        ordinal: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">number</span>) </span>{
            <span class="hljs-keyword">var</span> b = number % <span class="hljs-number">10</span>,
                output = (toInt(number % <span class="hljs-number">100</span> / <span class="hljs-number">10</span>) === <span class="hljs-number">1</span>) ? <span class="hljs-string">'th'</span> :
                    (b === <span class="hljs-number">1</span>) ? <span class="hljs-string">'st'</span> :
                    (b === <span class="hljs-number">2</span>) ? <span class="hljs-string">'nd'</span> :
                    (b === <span class="hljs-number">3</span>) ? <span class="hljs-string">'rd'</span> : <span class="hljs-string">'th'</span>;
            <span class="hljs-keyword">return</span> number + output;
        }
    });

    <span class="hljs-comment">/* EMBED_LANGUAGES */</span>

    <span class="hljs-comment">/************************************
        Exposing Moment
    ************************************/</span>

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">makeGlobal</span>(<span class="hljs-params">shouldDeprecate</span>) </span>{
        <span class="hljs-comment">/*global ender:false */</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> ender !== <span class="hljs-string">'undefined'</span>) {
            <span class="hljs-keyword">return</span>;
        }
        oldGlobalMoment = globalScope.moment;
        <span class="hljs-keyword">if</span> (shouldDeprecate) {
            globalScope.moment = deprecate(
                <span class="hljs-string">"Accessing Moment through the global scope is "</span> +
                <span class="hljs-string">"deprecated, and will be removed in an upcoming "</span> +
                <span class="hljs-string">"release."</span>,
                moment);
        } <span class="hljs-keyword">else</span> {
            globalScope.moment = moment;
        }
    }</pre></div></div>
            
        </li>
        
        
        <li id="section-120">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-120">&#182;</a>
              </div>
              <p>CommonJS module is defined</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">if</span> (hasModule) {
        <span class="hljs-built_in">module</span>.exports = moment;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> define === <span class="hljs-string">"function"</span> &amp;&amp; define.amd) {
        define([], <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">return</span> moment;
        });
        makeGlobal(<span class="hljs-literal">true</span>);
    } <span class="hljs-keyword">else</span> {
        makeGlobal();
    }
}).call(<span class="hljs-keyword">this</span>);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
